(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{e359e09ba81442f3251f:function(e,t,r){"use strict";r.r(t);var n,a=r("8af190b70a6bc55c6f1b"),o=r.n(a),s=(r("8a2d1b95e05b6a321e74"),r("d7dd51e1bf6bfc2c9c3d")),i=r("a28fc3c963a1d4d1a2e5"),c=r("d00d7890ac59fd19b20f"),u=r("6542cd13fd5dd1bcffd4"),d=r("adc20f99e57c573c589c"),l=r("d95b0cf107403b178365"),m=r("ab4cb61bcb2dc161defb"),p=r("e95a63b25fb92ed15721"),g=r("6b20a4038fb2adfb033d"),f=r("b57570cc703435a24b60"),b=r("e1074860633bf61d61c3"),h=r("da310028ba2a28510514"),y=r("f474c75d9da68c034eae"),v=(r("35a24e2eab80b90da161"),r("0a44d9aa061b3ae2063b"),r("ba6222ad0f1a8355d8c6"));r("f85e09def79cc2a20bc2");function O(e,t,r,a){n||(n="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=a;else if(s>1){for(var i=new Array(s),c=0;c<s;c++)i[c]=arguments[c+3];t.children=i}if(t&&o)for(var u in o)void 0===t[u]&&(t[u]=o[u]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var S=O("label",{},void 0,O("strong",{},void 0,"Program Category")),_=O("label",{},void 0,"Milestone Title"),C=O("br",{}),j=O("label",{},void 0,O("strong",{},void 0,"Description")),E=O("label",{},void 0,"Milestone Date"),D=O("br",{}),A=O("br",{}),R=O("br",{}),P=function(e){var t=e.data,r=e.errors,n=e.handleChange,a=e.handleSubmit,o=e.handleChecked,s=e.onDrop,i=e.image,c=e.programsCategoriesDropdown,u=e.handleProgramCategory,d=e.addMilestone,l=e.removeMilestone,m=e.handleInputChange;return O(g.a,{},void 0,O(g.a.Field,{error:!!r.category_id},void 0,S,O(f.a,{placeholder:"Select Program Category",options:c,search:!0,selection:!0,allowAdditions:!0,onChange:u,value:t.category_id?t.category_id:"",required:!0})),O(g.a.Field,{error:!!r.title},void 0,_,O("input",{type:"text",name:"title",value:t.title||"",onChange:n}),r.title&&O("span",{},void 0,r.title)),t.milestones&&t.milestones.map((function(e,n){return O("div",{},void 0,C,n+1,O(g.a.Field,{error:!!r.description},void 0,j,O(b.a,{name:"description",value:t.milestones[n].description||"",onChange:function(){return m(n,event)}}),O(g.a.Field,{error:!!r.date_milestone},void 0,E,O("input",{type:"text",name:"date_milestone",value:t.milestones[n].date_milestone||"",onChange:function(e){return m(n,e)}}))),O(h.a,{className:"button primary",onClick:function(){return l(n)}},void 0,"Remove"))})),r.milestoneDateError&&O("span",{style:{color:"red"}},void 0,r.milestoneDateError),D,r.milestoneDescriptionError&&O("span",{style:{color:"red"}},void 0,r.milestoneDescriptionError),A,R,O(h.a,{className:"button primary",onClick:function(){return d()}},void 0,"Add"),O(v.a,{file:i&&i||{},image:t.image_name&&t.image_name.document_name||{},onDrop:s}),r.image&&O("span",{style:{color:"red"}},void 0,r.image),O(g.a.Field,{},void 0,O(y.a,{onChange:o,checked:t.active||!1,label:"Active",name:"active"})),O(h.a,{className:"button primary",loading:e.isRequesting,disabled:e.isRequesting,onClick:a},void 0,"Submit"))},I=(r("25995a7ae5cc79b4f4a4"),r("4f0dfcf9dfa819c812e6"),r("6c68d13fe9e3e77d8fc4")),w=r("3ad3c1378076e862aab0"),T="DAV/AdminDashboard/containers/Programs/Create/POST_MILESTONES_REQUEST",k="DAV/AdminDashboard/containers/Programs/Create/POST_MILESTONES_SUCCESS",M="DAV/AdminDashboard/containers/Programs/Create/POST_MILESTONES_FAILURE",q="DAV/AdminDashboard/containers/Programs/Create/GET_MILESTONES_CATEGORY_REQUEST",L="DAV/AdminDashboard/containers/Programs/Create/GET_MILESTONES_CATEGORY_SUCCESS",x="DAV/AdminDashboard/containers/Programs/Create/GET_MILESTONES_CATEGORY_FAILURE",B="DAV/AdminDashboard/containers/Programs/Create/UPDATE_MILESTONES_BY_ID_REQUEST",N="DAV/AdminDashboard/containers/Programs/Create/UPDATE_MILESTONES_BY_ID_SUCCESS",U="DAV/AdminDashboard/containers/Programs/Create/UPDATE_MILESTONES_BY_ID_FAILURE",V="DAV/AdminDashboard/containers/Programs/Create/GET_MILESTONES_BY_ID_REQUEST",G="DAV/AdminDashboard/containers/Programs/Create/GET_MILESTONES_BY_ID_SUCCESS",F="DAV/AdminDashboard/containers/Programs/Create/GET_MILESTONES_BY_ID_FAILURE",Y="DAV/containers/AdminDashboard/Blogs/LOAD_CATEGORY_REQUEST",J="DAV/containers/AdminDashboard/Blogs/LOAD_CATEGORY_SUCCESS",z="DAV/containers/AdminDashboard/Blogs/LOAD_CATEGORY_FAILURE",Q="DAV/AdminDashboard/containers/Programs/Create/CLEAR_MESSAGE",$=r("371a6f90cf4b090759be"),W=Object($.a)(T,"data","image"),H=Object($.a)(k,"response"),K=Object($.a)(M,"error"),X=Object($.a)(q),Z=Object($.a)(L,"response"),ee=Object($.a)(x,"error"),te=Object($.a)(V,"noticeId"),re=Object($.a)(G,"response"),ne=Object($.a)(F,"error"),ae=Object($.a)(B,"notice","noticeId","image"),oe=Object($.a)(N,"response"),se=Object($.a)(U,"error"),ie=Object($.a)(Y,"page","perpage","query"),ce=(Object($.a)(J,"response"),Object($.a)(z,"error"),Object($.a)(Q)),ue=r("8636a5b0e6ac43ae8b4d"),de=regeneratorRuntime.mark(he),le=regeneratorRuntime.mark(ye),me=regeneratorRuntime.mark(ve),pe=regeneratorRuntime.mark(Oe),ge=regeneratorRuntime.mark(Se),fe=regeneratorRuntime.mark(_e),be=regeneratorRuntime.mark(Ce);function he(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.f)(k);case 2:return e.sent,e.next=5,Object(I.d)(Object(w.push)("/admin/dashboard/milestones"));case 5:case"end":return e.stop()}}),de)}function ye(e){var t,r,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=localStorage.getItem("token"),r=e.image,a.next=4,Object(I.c)(he);case 4:return n=a.sent,a.next=7,Object(I.c)(ue.a.multipartPost("milestones",H,K,e.data,r,t));case 7:return a.next=9,Object(I.f)([w.LOCATION_CHANGE,M]);case 9:return a.next=11,Object(I.b)(n);case 11:case"end":return a.stop()}}),le)}function ve(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.f)(N);case 2:return e.sent,e.next=5,Object(I.d)(Object(w.push)("/admin/dashboard/milestones"));case 5:case"end":return e.stop()}}),me)}function Oe(e){var t,r,n,a,o;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=localStorage.getItem("token"),r=e.notice,n=e.noticeId,a=e.image,s.next=4,Object(I.c)(ve);case 4:return o=s.sent,s.next=7,Object(I.c)(ue.a.multipartPost("milestones/info/".concat(n),oe,se,r,a,t,"put"));case 7:return s.next=9,Object(I.f)([w.LOCATION_CHANGE,U]);case 9:return s.next=11,Object(I.b)(o);case 11:case"end":return s.stop()}}),pe)}function Se(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=localStorage.getItem("token"),r.next=3,Object(I.c)(ue.a.get("milestones/info/".concat(e.noticeId),re,ne,t));case 3:case"end":return r.stop()}}),ge)}function _e(e){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,Object(I.c)(ue.a.get("programs-category?&active=all",Z,ee,t));case 3:case"end":return e.stop()}}),fe)}function Ce(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.g)(T,ye);case 2:return e.next=4,Object(I.g)(V,Se);case 4:return e.next=6,Object(I.g)(q,_e);case 6:return e.next=8,Object(I.g)(B,Oe);case 8:case"end":return e.stop()}}),be)}var je=r("54f683fcda7806277002"),Ee=r("62cade0222f879de1092"),De=Object(je.fromJS)({response:"",error:"",requesting:!1,success:!1,getProgramsByIdResponse:{},categoryList:[],programsCategory:[]});var Ae,Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case T:case Y:case q:return e.merge({requesting:!0,success:!1,response:"",error:""});case L:return e.merge({requesting:!1,success:!0,response:t.response.message,programsCategory:Object(je.fromJS)(t.response.data.dataList),error:""});case x:return e.merge({requesting:!1,success:!1,response:"",error:t.error.message});case V:return e.merge({requesting:!0,success:!1,response:"",error:"",getProgramsByIdResponse:""});case B:return e.merge({requesting:!0,success:!1,response:"",error:""});case k:return e.merge({requesting:!1,success:!0,response:t.response.message,error:""});case J:return e.merge({requesting:!1,success:!0,response:t.response.message,error:null,categoryList:Object(je.fromJS)(t.response.data.dataList)});case G:return e.merge({requesting:!1,success:!0,response:"",error:"",getProgramsByIdResponse:Object(je.fromJS)(t.response.data)});case N:return e.merge({requesting:!1,success:!0,response:t.response.message,error:""});case M:case z:case F:case U:return e.merge({requesting:!1,success:!1,response:"",error:t.error.message});case Q:return e.merge({response:"",error:"",requesting:!1,success:!1,getProgramsByIdResponse:{}});case Ee.t:return De;default:return e}},Pe=function(e){return e.get("milestonesCreate")};function Ie(e){return(Ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t,r,n){Ae||(Ae="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var s=new Array(o),i=0;i<o;i++)s[i]=arguments[i+3];t.children=s}if(t&&a)for(var c in a)void 0===t[c]&&(t[c]=a[c]);else t||(t=a||{});return{$$typeof:Ae,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Te(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ve(e);if(t){var a=Ve(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ne(this,r)}}function Ne(e,t){return!t||"object"!==Ie(t)&&"function"!==typeof t?Ue(e):t}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fe=Object(i.b)({isSuccess:Object(i.a)(Pe,(function(e){return e.get("success")})),isRequesting:Object(i.a)(Pe,(function(e){return e.get("requesting")})),successResponse:Object(i.a)(Pe,(function(e){return e.get("response")})),errorResponse:Object(i.a)(Pe,(function(e){return e.get("error")})),milestonesById:Object(i.a)(Pe,(function(e){return e.get("getProgramsByIdResponse")})),categories:Object(i.a)(Pe,(function(e){return e.get("categoryList")})),user:Object(u.c)(),programsCategories:Object(i.a)(Pe,(function(e){return e.get("programsCategory")}))}),Ye=we("div",{className:"pb-3"},void 0,we(p.Link,{className:"ui vertical animated button primary",to:"/admin/dashboard/milestones",role:"button"},void 0,we("div",{className:"hidden content"},void 0,"Back"),we("div",{className:"visible content"},void 0,we("i",{"aria-hidden":"true",className:"left arrow icon"})))),Je=we("h1",{className:"main__title"},void 0,"Milestones Form"),ze=we("br",{}),Qe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(s,e);var t,r,n,a=Be(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Ge(Ue(t=a.call(this,e)),"state",{data:{active:!1,milestones:[{date_milestone:"",description:""}]},errors:{},image:{},programsCategoriesDropdown:[]}),Ge(Ue(t),"onDrop",(function(e){var r=t.state.errors;e&&(delete r.image,(e=e[0]).preview=URL.createObjectURL(e),t.setState({image:e}))})),Ge(Ue(t),"handleChange",(function(e){delete t.state.errors[e.target.name],t.setState({data:qe(qe({},t.state.data),{},Ge({},e.target.name,e.target.value))})})),Ge(Ue(t),"handleChecked",(function(e,r){t.setState((function(e){return{data:qe(qe({},e.data),{},Ge({},r.name,!e.data[r.name]))}}))})),Ge(Ue(t),"handleSubmit",(function(e){e.preventDefault();var r=t.validate();if(t.setState({errors:r}),0===Object.keys(r).length){var n=t.props.match.params.programs_id?t.props.match.params.programs_id:null;t.state.data;if(n){var a=t.state.data;t.props.updateProgramsByIdRequest(a,n,t.state.image)}else{var o=t.state.data;t.props.postProgramsRequest(o,t.state.image)}}})),Ge(Ue(t),"validate",(function(){var e=t.state.data,r={};e.title||(r.title="Title can't be blank");for(var n=!1,a=!1,o=0;o<e.milestones.length;o++)""==e.milestones[o].date_milestone&&(n=!0),""==e.milestones[o].description&&(a=!0);return 1==n&&(r.milestoneDateError="Date is required in all fields of milestone"),1==a&&(r.milestoneDescriptionError="Description is required in all fields of milestone"),e.category_id&&0!=e.category_id.length||(r.category_id="Can't be blank"),r})),Ge(Ue(t),"handleProgramCategory",(function(e,r){var n=r.value,a=t.state.errors;a.category_id&&n&&delete a.category_id,t.setState({category_id:[]}),t.setState({data:qe(qe({},t.state.data),{},{category_id:n})})})),Ge(Ue(t),"addMilestone",(function(){var e=Te(t.state.data.milestones);e.push({date_milestone:"",description:""}),t.setState({data:qe(qe({},t.state.data),{},{milestones:e})})})),Ge(Ue(t),"removeMilestone",(function(e,r){var n=Te(t.state.data.milestones);n.splice(e,1),t.setState({data:qe(qe({},t.state.data),{},{milestones:n})})})),Ge(Ue(t),"handleInputChange",(function(e,r){var n=Te(t.state.data.milestones);"description"===r.target.name?n[e].description=r.target.value:n[e].date_milestone=r.target.value,t.setState({data:qe(qe({},t.state.data),{},{milestones:n})})})),t}return t=s,(r=[{key:"componentWillMount",value:function(){var e=this.props.match.path;e=e.split("/");var t=this.props.user&&this.props.user.size>0?this.props.user.toJS().role:"";this.setState({urlAction:e[4],userRole:t})}},{key:"componentDidMount",value:function(){var e=this.state,t=(e.page,e.perPage,e.query,this.props.match.params.programs_id?this.props.match.params.programs_id:null);t&&this.props.getProgramsByIdRequest(t),this.props.getProgramsCategoryRequest()}},{key:"componentWillReceiveProps",value:function(e){if(e.programsCategories!==this.props.programsCategories&&e.programsCategories.size>0){var t=e.programsCategories&&e.programsCategories.toJS().map((function(e,t){return{key:e._id,value:e._id,text:e.category_title}}));this.setState({programsCategoriesDropdown:t})}e.milestonesById!==this.props.milestonesById&&e.milestonesById.size>0&&this.setState((function(t){return{data:e.milestonesById?e.milestonesById.toJS():{}}}))}},{key:"componentWillUnmount",value:function(){this.props.clearMessage()}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.errors,n=e.image,a=e.programsCategoriesDropdown,s=this.props,i=s.successResponse,u=s.errorResponse;return we(o.a.Fragment,{},void 0,Ye,Je,ze,i&&i.size>0&&i.toJS().map((function(e,t){return we(c.a,{successMessage:Object.values(e)[0],type:"success"},"info".concat(t))})),"string"===typeof u&&we(c.a,{errorMessage:u,type:"danger"}),u&&u.size>0&&u.toJS().map((function(e,t){return we(c.a,{errorMessage:Object.values(e)[0],type:"danger"},"list".concat(t))})),we(P,{errors:r,data:t,handleChange:this.handleChange,handleSubmit:this.handleSubmit,handleChecked:this.handleChecked,isRequesting:this.props.isRequesting,onDrop:this.onDrop,image:n,programsCategoriesDropdown:a,handleProgramCategory:this.handleProgramCategory,addMilestone:this.addMilestone,removeMilestone:this.removeMilestone,handleInputChange:this.handleInputChange}))}}])&&Le(t.prototype,r),n&&Le(t,n),s}(o.a.Component),$e=Object(l.a)({key:"milestonesCreate",reducer:Re}),We=Object(d.a)({key:"milestonesCreate",saga:Ce}),He=Object(s.connect)(Fe,(function(e){return{postProgramsRequest:function(t,r){return e(W(t,r))},getProgramsByIdRequest:function(t){return e(te(t))},updateProgramsByIdRequest:function(t,r,n){return e(ae(t,r,n))},loadCategories:function(t,r,n){return e(ie(t,r,n))},getProgramsCategoryRequest:function(){return e(X())},clearMessage:function(){return e(ce())}}}));t.default=Object(m.compose)($e,We,He)(Qe)}}]);