(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{b2318d430e8976a98713:function(e,t,r){"use strict";r.r(t);var n=r("8af190b70a6bc55c6f1b"),o=r.n(n),a=r("3ad3c1378076e862aab0"),i=(r("8a2d1b95e05b6a321e74"),r("d95b0cf107403b178365")),s=r("dc1488078737f5ae65e0"),c=r.n(s),u=r("7662150061b2d57d7074"),l=r("bf479727ef34adb276a5"),f=r("800f762ddd9d7e8466d6"),p=r("d7dd51e1bf6bfc2c9c3d"),d=r("a28fc3c963a1d4d1a2e5"),b=r("86422bf1949d7c9f9faa"),m=r("038626dad6faefa28f5b"),g=r("344977176ae9f8bae630"),h=r("da310028ba2a28510514"),v=r("6b20a4038fb2adfb033d"),O=r("384d9479bdc5794993e1"),y=r("54f683fcda7806277002"),w="App/LoginContainer/FORGOT_PASSWORD_REQUEST",j="App/LoginContainer/FORGOT_PASSWORD_SUCCESS",R="App/LoginContainer/FORGOT_PASSWORD_FAILURE",S="App/LoginContainer/RESEND_CONFIRMATION_REQUEST",_=Object(y.fromJS)({response:null,error:null,requesting:!1,success:!1,userId:"",resendEmailRequesting:!1});var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case w:return e.merge({requesting:!0,error:null,response:null,success:!1});case j:return e.merge({requesting:!1,response:t.response.message,error:null,success:!0});case R:return e.merge({requesting:!1,response:null,error:t.error.message,success:!1,userId:t.error.data&&t.error.data.user_id?t.error.data.user_id:""});case S:return e.merge({resendEmailRequesting:!0});case"App/LoginContainer/RESEND_CONFIRMATION_SUCCESS":return e.merge({resendEmailRequesting:!1,response:t.response.message,error:null,userId:""});case"App/LoginContainer/RESEND_CONFIRMATION_FAILURE":return e.merge({resendEmailRequesting:!1});case"App/LoginContainer/FORGOT_PASSWORD_RESET":return _;default:return e}},E=r("6c68d13fe9e3e77d8fc4"),P=r("8636a5b0e6ac43ae8b4d"),k=r("371a6f90cf4b090759be"),F=Object(k.a)(w,"data"),N=Object(k.a)(j,"response"),I=Object(k.a)(R,"error"),A=Object(k.a)(S,"userId"),D=Object(k.a)("App/LoginContainer/RESEND_CONFIRMATION_SUCCESS","response"),q=Object(k.a)("App/LoginContainer/RESEND_CONFIRMATION_FAILURE","error"),T=Object(k.a)("App/LoginContainer/FORGOT_PASSWORD_RESET"),L=regeneratorRuntime.mark(G),x=regeneratorRuntime.mark(W),M=regeneratorRuntime.mark(J),U=regeneratorRuntime.mark($);function G(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.f)(j);case 2:case"end":return e.stop()}}),L)}function W(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(E.c)(G);case 2:return t=r.sent,r.next=5,Object(E.a)(P.a.post("user/security-settings/reset-password-link",N,I,e.data));case 5:return r.next=7,Object(E.f)([a.LOCATION_CHANGE,R]);case 7:return r.next=9,Object(E.b)(t);case 9:case"end":return r.stop()}}),x)}function J(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.a)(P.a.post("user/resend-confirm-email/".concat(e.userId),D,q,{userId:e.userId},""));case 2:case"end":return t.stop()}}),M)}function $(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.g)(w,W);case 2:return e.next=4,Object(E.g)(S,J);case 4:case"end":return e.stop()}}),U)}var z,H=function(e){return e.get("loginForgotPassword")},Q=r("9683455beae561750395"),Y=r("adc20f99e57c573c589c"),X=r("ab4cb61bcb2dc161defb");function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t,r,n){z||(z="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=n;else if(a>1){for(var i=new Array(a),s=0;s<a;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:z,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oe(e);if(t){var o=oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return re(this,r)}}function re(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie,se=Object(d.b)({successResponse:Object(d.a)(H,(function(e){return e.get("response")})),errorResponse:Object(d.a)(H,(function(e){return e.get("error")})),isRequesting:Object(d.a)(H,(function(e){return e.get("requesting")})),success:Object(d.a)(H,(function(e){return e.get("success")})),unverifiedUserId:Object(d.a)(H,(function(e){return e.get("userId")})),requestingResendEmail:Object(d.a)(H,(function(e){return e.get("resendEmailRequesting")}))}),ce=K("h3",{className:"thin"},void 0,"Reset Your Password"),ue=K("p",{},void 0,"Don\u2019t worry! Just fill in your email and we\u2019ll send you a password reset link."),le=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(a,e);var t,r,n,o=te(a);function a(){var e;V(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ae(ne(e=o.call.apply(o,[this].concat(r))),"state",{data:{email:""},errors:{}}),ae(ne(e),"handleChange",(function(t){t.preventDefault(),e.setState({data:ae({},t.target.name,t.target.value)})})),ae(ne(e),"validate",(function(e){var t={};return e.email||(t.email="Can't be blank"),t})),ae(ne(e),"handleSubmit",(function(t){t.preventDefault();var r=e.validate(e.state.data);e.setState({errors:r}),0===Object.keys(r).length&&e.props.forgotPassword(e.state.data)})),ae(ne(e),"resendEmail",(function(){e.props.resendConfirmationEmail(e.props.unverifiedUserId)})),e}return t=a,(r=[{key:"componentWillMount",value:function(){this.props.resetForm()}},{key:"render",value:function(){var e=this.state,t=e.errors,r=e.data,n=this.props,o=n.isRequesting,a=n.errorResponse,i=n.successResponse,s=n.unverifiedUserId,c=n.requestingResendEmail;return K(g.a,{open:!0,onClose:this.props.showForgotPasswordForm,className:"mini",closeIcon:!0},void 0,K(g.a.Content,{},void 0,a&&K("div",{className:"negative message"},void 0,K("p",{},void 0,a),s&&K(h.a,{secondary:!0,size:"small",onClick:this.resendEmail,disabled:c,loading:c},void 0,"Resend Email")),i&&K("p",{className:"positive message"},void 0,i),ce,ue,K(v.a,{className:"form",onSubmit:this.handleSubmit},void 0,K(Q.a,{type:"email",name:"email",placeholder:"Email",className:"form-control",value:r.email,onChange:this.handleChange,error:t.email}),K("div",{className:"field clearfix align-center"},void 0,K("div",{className:"inline-block"},void 0,K(h.a,{type:"submit",className:"primary button",loading:o,disabled:o},void 0,"Submit"))))))}}])&&Z(t.prototype,r),n&&Z(t,n),a}(o.a.Component),fe=Object(p.connect)(se,(function(e){return{hideDialog:function(){return e(Object(O.p)())},showDialog:function(t){return e(Object(O.p)(t))},forgotPassword:function(t){return e(F(t))},resetForm:function(){return e(T())},resendConfirmationEmail:function(t){return e(A(t))}}})),pe=Object(i.a)({key:"loginForgotPassword",reducer:C}),de=Object(Y.a)({key:"loginForgotPassword",saga:$}),be=Object(X.compose)(pe,de,fe)(le),me=r("6542cd13fd5dd1bcffd4"),ge=r("278a8afb137fef007e00"),he=r("c33fc725250a69982b1e"),ve=r("e95a63b25fb92ed15721"),Oe=r("fe9bc0ecf6f2c7b66885"),ye=r("d559af73313ecb218818"),we=r.n(ye);function je(e,t,r,n){ie||(ie="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=n;else if(a>1){for(var i=new Array(a),s=0;s<a;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:ie,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Re(e){return(Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ie(e);if(t){var o=Ie(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Fe(this,r)}}function Fe(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?Ne(e):t}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=Object(d.b)({userResponse:Object(me.c)(),requesting:Object(m.d)(),requestingResendEmail:Object(m.e)(),response:Object(m.f)(),error:Object(m.c)(),success:Object(m.g)(),isCaptchaEnabled:Object(m.a)(),unverifiedImpUserId:Object(m.i)(),email:Object(m.b)()}),qe=je(ve.Redirect,{to:"/user/dashboard"}),Te=je("div",{className:"login__logo"},void 0,je(u.a,{spaced:"bottom",size:"small",src:c.a,alt:"XAL",centered:!0})),Le=je(l.a,{name:"warning circle"}),xe=je(f.a.Header,{},void 0,"Error !"),Me=je("p",{},void 0,"OR"),Ue=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(a,e);var t,r,n,o=ke(a);function a(){var e;Ce(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ae(Ne(e=o.call.apply(o,[this].concat(r))),"state",{data:{email:e.props.email||""},reCaptcha:"",show_password:!1,errors:{},err:"",loadingFb:!1,show:!1,loadingGoogle:!1,redirectToReferer:!1,showMultifactorForm:!1}),Ae(Ne(e),"handleChange",(function(t){t.persist(),e.setState((function(e){return{data:_e(_e({},e.data),{},Ae({},t.target.name,t.target.value))}}))})),Ae(Ne(e),"validate",(function(){var t=e.state,r=t.data,n=(t.reCaptcha,e.props.isCaptchaEnabled,{});return r.email||(n.email="Can't be blank"),r.password||(n.password="password_error"),n})),Ae(Ne(e),"handleSubmit",(function(t){t.preventDefault();var r=e.props,n=r.isCaptchaEnabled,o=r.loginRequest,a=e.state,i=a.data,s=a.reCaptcha,c=e.validate();if(e.setState({errors:c}),0===Object.keys(c).length){var u=(e.props.location.state||{from:!1}).from;o(n?_e(_e({},i),{},{reCaptcha:s}):i,u)}})),Ae(Ne(e),"onRecaptchaChange",(function(t){e.setState({reCaptcha:t})})),Ae(Ne(e),"onChange",(function(t){e.setState({reCaptcha:t})})),Ae(Ne(e),"showSignUpForm",(function(){e.props.showDialog(null),e.props.redirectToSignup()})),Ae(Ne(e),"showForgotPasswordForm",(function(){e.setState({show:!e.state.show})})),Ae(Ne(e),"resendEmail",(function(){e.props.resendConfirmationEmail(e.props.unverifiedImpUserId)})),Ae(Ne(e),"showMultifactorDialog",(function(){e.setState({showMultifactorForm:!e.state.showMultifactorForm})})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.isCaptchaEnabledRequest()}},{key:"componentWillUnmount",value:function(){this.props.clearMessages()}},{key:"componentWillReceiveProps",value:function(e){if(e.error&&e.error!=this.props.error&&e.error.length>0&&this.setState({err:e.error},(function(){localStorage.clear()})),e.userResponse&&e.userResponse.size>0&&e.userResponse!==this.props.userResponse){var t=e.userResponse.toJS(),r=t.multi_factor_auth_enable,n=t.multi_factor_auth_enable_mobile,o=t.user_id;o&&(r||n)&&this.setState({showMultifactorForm:!0,user_id:o})}}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.errors,n=e.err,o=(e.reCaptcha,e.showMultifactorForm),a=e.user_id,i=this.props,s=i.response,c=i.requesting,u=(i.unverifiedImpUserId,i.requestingResendEmail,i.userResponse),l=u?u.toJS():{},p="";l&&Object.keys(l).length>1&&(p="customer"===l.role?"/user/dashboard":"/admin/dashboard");var d=Object(ge.a)();if(d)try{var b=we()(d);if("object"===Re(b)&&b.hasOwnProperty("user_id")&&"customer"===b.role)return qe}catch(e){throw e}return je("div",{className:"login__wrap"},void 0,je("div",{className:"login__box"},void 0,Te,this.state.show&&je(be,{showForgotPasswordForm:this.showForgotPasswordForm}),n&&n.length>0&&je(f.a,{negative:!0,icon:!0},void 0,Le,je(f.a.Content,{},void 0,xe,je("p",{},void 0,n))),s&&je("div",{className:"positive message"},void 0,s),je("h3",{},void 0,l&&"object"===Re(l)&&Object.keys(l).length>1?"Already Logged in":"Login"),l&&"object"===Re(l)&&!("_id"in l)&&je(he.a,{data:t,errors:r,requesting:c,handleSubmit:this.handleSubmit,handleChange:this.handleChange,onRecaptchaChange:this.onRecaptchaChange,showForgotPasswordForm:this.showForgotPasswordForm}),l&&Object.keys(l).length>1&&l._id&&je("div",{className:"login__info"},void 0,je("p",{},void 0,"You are already logged in. Go to"," ",je(ve.Link,{className:"alt-link",to:p},void 0,"Dashboard"),"."),Me,je("p",{},void 0,je("span",{className:"alt-link",onClick:this.props.logout},void 0,"Logout")," ","and sign in using different account.")),o&&je(Oe.a,{user_id:a,showMultifactorDialog:this.showMultifactorDialog})))}}])&&Ee(t.prototype,r),n&&Ee(t,n),a}(o.a.Component),Ge=Object(p.connect)(De,(function(e){return{loginRequest:function(t,r){return e(Object(O.j)(t,r))},showDialog:function(t){return e(Object(O.p)(t))},isCaptchaEnabledRequest:function(){return e(Object(O.a)())},clearMessages:function(){return e(Object(O.g)())},redirectToSignup:function(){return e(Object(a.push)("/signup"))},resendConfirmationEmail:function(t){return e(Object(O.o)(t))},linkFacebookRequest:function(t,r){return e(Object(O.b)(t,r))},linkGoogleRequest:function(t,r){return e(Object(O.c)(t,r))},logout:function(){return e(Object(O.m)())}}})),We=Object(i.a)({key:"login",reducer:b.a});t.default=Object(X.compose)(Ge,We)(Ue)}}]);