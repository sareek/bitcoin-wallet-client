(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"1a8def31a058c82825e0":function(e,n,t){"use strict";t.r(n);var r,o=t("8af190b70a6bc55c6f1b"),a=t.n(o),c=(t("8a2d1b95e05b6a321e74"),t("d7dd51e1bf6bfc2c9c3d")),i="APP/AdminProfile/EmergencyContactInfo/ADD_EMERGENCY_CONTACT_INFO_REQUEST",s="APP/AdminProfile/EmergencyContactInfo/ADD_EMERGENCY_CONTACT_INFO_SUCCESS",l="APP/AdminProfile/EmergencyContactInfo/ADD_EMERGENCY_CONTACT_INFO_FAILURE",u="APP/AdminProfile/EmergencyContactInfo/GET_EMERGENCY_CONTACT_INFO_REQUEST",d="APP/AdminProfile/EmergencyContactInfo/GET_EMERGENCY_CONTACT_INFO_SUCCESS",m="APP/AdminProfile/EmergencyContactInfo/GET_EMERGENCY_CONTACT_INFO_FAILURE",f="APP/AdminProfile/EmergencyContactInfo/UPDATE_EMERGENCY_CONTACT_INFO_REQUEST",p="APP/AdminProfile/EmergencyContactInfo/UPDATE_EMERGENCY_CONTACT_INFO_SUCCESS",b="APP/AdminProfile/EmergencyContactInfo/UPDATE_EMERGENCY_CONTACT_INFO_FAILURE",g="APP/AdminProfile/EmergencyContactInfo/REMOVE_EMERGENCY_CONTACT_INFO_REQUEST",y="APP/AdminProfile/EmergencyContactInfo/REMOVE_EMERGENCY_CONTACT_INFO_SUCCESS",h="APP/AdminProfile/EmergencyContactInfo/REMOVE_EMERGENCY_CONTACT_INFO_FAILURE",v="APP/AdminProfile/EmergencyContactInfo/EMERGENCY_CONTACT_INFO_CLEAR_STATE",C="APP/AdminProfile/EmergencyContactInfo/EMERGENCY_CONTACT_INFO_CLEAR_MESSAGES",_="APP/AdminProfile/EmergencyContactInfo/EMERGENCY_CONTACT_INFO_CLEAR_ERRORS",O=t("371a6f90cf4b090759be"),E=Object(O.a)(i,"data","userId"),N=Object(O.a)(s,"response"),A=Object(O.a)(l,"error"),S=Object(O.a)(f,"data","userId","id"),P=Object(O.a)(p,"response"),j=Object(O.a)(b,"error"),I=Object(O.a)(u,"userId"),R=Object(O.a)(d,"response"),w=Object(O.a)(m,"error"),T=Object(O.a)(g,"userId","id"),x=Object(O.a)(y,"response"),M=Object(O.a)(h,"error"),F=(Object(O.a)(v),Object(O.a)(C)),k=(Object(O.a)(_),t("a28fc3c963a1d4d1a2e5")),G=t("6542cd13fd5dd1bcffd4"),D=function(e){return e.get("adminProfileEmergencyContactInfo")},U=t("da310028ba2a28510514"),Y=t("df4d709115ae1aca60ef"),L=t("9282edc4b276357ca18a");function q(e,n,t,o){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,c=arguments.length-3;if(n||0===c||(n={children:void 0}),1===c)n.children=o;else if(c>1){for(var i=new Array(c),s=0;s<c;s++)i[s]=arguments[s+3];n.children=i}if(n&&a)for(var l in a)void 0===n[l]&&(n[l]=a[l]);else n||(n=a||{});return{$$typeof:r,type:e,key:void 0===t?null:""+t,ref:null,props:n,_owner:null}}var V,$=q("i",{className:"icon-check-circle"}),J=q("i",{className:"icon-envelope-o icon"}),H=q("i",{className:"icon-mobile icon"}),Q=q("i",{className:"icon-phone icon"}),W=q("i",{className:"icon-globe icon"}),z=q("i",{className:"icon-users icon"}),B=function(e){var n=e.contact,t=e.handleEdit,r=e.handleRemove;return q(L.a,{},void 0,q(L.a.Content,{},void 0,q(L.a.Header,{},void 0,"Name: ",n.person_name," ",n.approved&&$),q("div",{className:"list"},void 0,n.email&&q("div",{className:"item"},void 0,J,q("div",{className:"content"},void 0,"Email: ",n.email)),n.mobile_number&&q("div",{className:"item"},void 0,H," ",q("div",{className:"content"},void 0,"Mobile No.: ",n.country_code,n.mobile_number)),n.phone_number&&q("div",{className:"item"},void 0,Q," ",q("div",{className:"content"},void 0,"Phone No.: ",n.phone_number)),q("div",{className:"item"},void 0,W," ",q("div",{className:"content"},void 0,"Location: ",n.location&&n.location.formatted_address?n.location.formatted_address:"")),n.relationship&&q("div",{className:"item"},void 0,z,q("div",{className:"content"},void 0," ","Relationship: ",n.relationship)))),q(L.a.Content,{extra:!0},void 0,q("div",{className:""},void 0,q(U.a,{name:n._id,primary:!0,onClick:t},void 0,"Edit"),q(U.a,{name:n._id,basic:!0,onClick:r},void 0,"Remove"))))},K=t("6b20a4038fb2adfb033d"),X=t("2a75d1bf8961d1e9e83c"),Z=t("6909e46c27aed57828fc"),ee=t("2be5c0db62773e30f8bd"),ne=t.n(ee);function te(e,n,t,r){V||(V="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(n||0===a||(n={children:void 0}),1===a)n.children=r;else if(a>1){for(var c=new Array(a),i=0;i<a;i++)c[i]=arguments[i+3];n.children=c}if(n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});return{$$typeof:V,type:e,key:void 0===t?null:""+t,ref:null,props:n,_owner:null}}var re=[{key:"family",text:"Family",value:"family"},{key:"friend",text:"Friend",value:"friend"}],oe=te("label",{},void 0,"Emergency Contact Name: "),ae=te("i",{className:"icon-exclamation-triangle red"}),ce=te("label",{},void 0,"Emergency Contact Email: "),ie=te("i",{className:"icon-exclamation-triangle red"}),se=te("i",{className:"icon-exclamation-triangle red"}),le=te("label",{},void 0,"Alternate Phone No. (optional) "),ue=te("i",{className:"icon-exclamation-triangle red"}),de=te("label",{},void 0,"Location: "),me=te("i",{className:"icon-exclamation-triangle red"}),fe=te("label",{},void 0,"Relationship: "),pe=function(e){var n=e.handleSubmit,t=e.handleCancel,r=e.handleChange,o=e.handleSelectInput,a=(e.onSuggestSelect,e.handleMobileChange,e.onMobileCountryChange,e.data),c=(e.mobileNumberModified,e.loading),i=(e.locationValChange,e.errors),s=e.setMobileNumber,l="".concat(a.country_code).concat(a.mobile_number);return te(K.a,{className:"fluid mg-top-md"},void 0,te(K.a.Field,{},void 0,oe,te(X.a,{name:"person_name",value:a.person_name,onChange:r}),i&&i.person_name&&te("span",{"data-tooltip":i.person_name},void 0,ae)),te(K.a.Field,{},void 0,ce,te(X.a,{name:"email",type:"email",value:a.email,onChange:r}),i&&i.email&&te("span",{"data-tooltip":i.email},void 0,ie)),te(K.a.Field,{},void 0,te("label",{},void 0,"Mobile No.: ",i&&i.mobile_number&&te("span",{"data-tooltip":i.mobile_number},void 0,se)),te(ne.a,{setMobileNumber:s,intlPhoneNumber:l,country_abbr:a.country_abbr})),te(K.a.Field,{},void 0,le,te(X.a,{name:"phone_number",type:"tel",value:a.phone_number,onChange:r,placeholder:"Phone number with country code"}),i&&i.phone_number&&te("span",{"data-tooltip":i.phone_number},void 0,ue)),te(K.a.Field,{},void 0,de,i&&i.location&&te("span",{"data-tooltip":i.location},void 0,me)),te(K.a.Field,{},void 0,fe,te(Z.a,{name:"relationship",compact:!0,options:re,defaultValue:a.relationship,onChange:o})),te("div",{},void 0,te(U.a,{primary:!0,onClick:n,loading:c,disabled:c},void 0,"Save"),te(U.a,{basic:!0,onClick:t},void 0,"Cancel")))},be=function(e){var n="",t="",r="",o="",a="",c="",i=37.7749295,s=-122.41941550000001,l="",u="";if(e){var d=e.placeId,m=e.gmaps,f=e.label,p=e.location;if(u=f,l=d,m){var b=m.address_components;c=m.formatted_address,b.map((function(e){-1!==e.types.indexOf("postal_code")&&(t=e.long_name),-1!==e.types.indexOf("country")&&(n=e.long_name),-1!==e.types.indexOf("administrative_area_level_1")&&(o=e.long_name),-1!==e.types.indexOf("administrative_area_level_2")&&(a=e.long_name),-1!==e.types.indexOf("locality")&&(r=e.long_name)}))}if(p){var g=p.lat,y=p.lng;g&&(i=g),y&&(s=y)}}return{location:{city:r,state:o,postal_code:t,placeId:l,country:n,region:a,formatted_address:c,label:u},coordinates:{latitude:i,longitude:s}}},ge=t("6c68d13fe9e3e77d8fc4"),ye=t("3ad3c1378076e862aab0"),he=t("8636a5b0e6ac43ae8b4d"),ve=t("278a8afb137fef007e00"),Ce=regeneratorRuntime.mark(Se),_e=regeneratorRuntime.mark(Pe),Oe=regeneratorRuntime.mark(je),Ee=regeneratorRuntime.mark(Ie),Ne=regeneratorRuntime.mark(Re),Ae=regeneratorRuntime.mark(we);function Se(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),Ce)}function Pe(e){var n,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(ve.a)(),r.next=3,Object(ge.c)(Se);case 3:return t=r.sent,r.next=6,Object(ge.c)(he.a.get("api/emergency-contact-info/data/".concat(e.userId),R,w,n));case 6:return r.next=8,Object(ge.f)([ye.LOCATION_CHANGE,m]);case 8:return r.next=10,Object(ge.b)(t);case 10:case"end":return r.stop()}}),_e)}function je(e){var n,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(ve.a)(),r.next=3,Object(ge.c)(Se);case 3:return t=r.sent,r.next=6,Object(ge.c)(he.a.post("api/emergency-contact-info/data/".concat(e.userId),N,A,e.data,n));case 6:return r.next=8,Object(ge.f)([ye.LOCATION_CHANGE,l]);case 8:return r.next=10,Object(ge.b)(t);case 10:case"end":return r.stop()}}),Oe)}function Ie(e){var n,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(ve.a)(),r.next=3,Object(ge.c)(Se);case 3:return t=r.sent,r.next=6,Object(ge.c)(he.a.put("api/emergency-contact-info/data/".concat(e.userId,"/").concat(e.id),P,j,e.data,n));case 6:return r.next=8,Object(ge.f)([ye.LOCATION_CHANGE,b]);case 8:return r.next=10,Object(ge.b)(t);case 10:case"end":return r.stop()}}),Ee)}function Re(e){var n,t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(ve.a)(),r.next=3,Object(ge.c)(Se);case 3:return t=r.sent,r.next=6,Object(ge.c)(he.a.patch("api/emergency-contact-info/data/".concat(e.userId,"/").concat(e.id),x,M,{_id:e.id},n));case 6:return r.next=8,Object(ge.f)([ye.LOCATION_CHANGE,h]);case 8:return r.next=10,Object(ge.b)(t);case 10:case"end":return r.stop()}}),Ne)}function we(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.g)(u,Pe);case 2:return e.next=4,Object(ge.g)(i,je);case 4:return e.next=6,Object(ge.g)(f,Ie);case 6:return e.next=8,Object(ge.g)(g,Re);case 8:case"end":return e.stop()}}),Ae)}var Te=t("54f683fcda7806277002"),xe=t("62cade0222f879de1092"),Me=Object(Te.fromJS)({response:null,error:null,requesting:!1,success:!1,emergencyContacts:[]});var Fe,ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case u:case f:case i:case g:return e.merge({requesting:!0,error:null,response:null,success:!1});case m:case b:case l:case h:return e.merge({requesting:!1,response:null,error:n.error.message,success:!1});case d:return e.merge({requesting:!1,response:null,error:null,success:!0,emergencyContacts:n.response.data});case s:return e.merge({requesting:!1,response:n.response.message,error:null,success:!0}).update("emergencyContacts",(function(e){return e.push(Object(Te.fromJS)(n.response.data))}));case p:return e.merge({requesting:!1,response:n.response.message,error:null,success:!0}).update("emergencyContacts",(function(e){return e.map((function(e){return e.get("_id")!==n.response.data._id?e:Object(Te.fromJS)(n.response.data)}))}));case y:return e.merge({requesting:!1,response:n.response.message,error:null,success:!0}).update("emergencyContacts",(function(e){return e.filter((function(e){return e.get("_id")!==n.response.data._id}))}));case C:case _:return e.merge({response:null,error:null});case v:case xe.t:return Me;default:return e}},Ge=t("adc20f99e57c573c589c"),De=t("d95b0cf107403b178365"),Ue=t("ab4cb61bcb2dc161defb");function Ye(e){return(Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,n,t,r){Fe||(Fe="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(n||0===a||(n={children:void 0}),1===a)n.children=r;else if(a>1){for(var c=new Array(a),i=0;i<a;i++)c[i]=arguments[i+3];n.children=c}if(n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});return{$$typeof:Fe,type:e,key:void 0===t?null:""+t,ref:null,props:n,_owner:null}}function qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qe(Object(t),!0).forEach((function(n){Ke(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function $e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Je(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,n){return(He=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function Qe(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Be(e);if(n){var o=Be(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return We(this,t)}}function We(e,n){return!n||"object"!==Ye(n)&&"function"!==typeof n?ze(e):n}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Xe=Object(k.b)({user:Object(G.c)(),emergencyContactInfo:Object(k.a)(D,(function(e){return e})),emergencyContacts:Object(k.a)(D,(function(e){return e.get("emergencyContacts")})),successResponse:Object(k.a)(D,(function(e){return e.get("response")})),errorResponse:Object(k.a)(D,(function(e){return e.get("error")})),isRequesting:Object(k.a)(D,(function(e){return e.get("requesting")})),success:Object(k.a)(D,(function(e){return e.get("success")}))}),Ze={person_name:"",email:"",mobile_number:"",phone_number:"",country_code:"",country_abbr:"",relationship:"family",location:{}},en=Le("br",{}),nn=Le("p",{className:"note"},void 0,"In an unfortunate event of emergency, the user may trigger the from with in the app by simply pressing on the icon. Instantly an email shall be sent to the list of trusted emergency contact peron's mailbox along with an SMS to your mobile phone which the user has registered in his system\u201d. The email and sms shall carry information related to the last known location and contact details of the user along with the contact details of our SOS Response System Representative."),tn=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&He(e,n)}(a,e);var n,t,r,o=Qe(a);function a(){var e;$e(this,a);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Ke(ze(e=o.call.apply(o,[this].concat(t))),"state",{data:Ze,emergencyContacts:[],showAddForm:!1,error:{},message:{},mobileNumberModified:!1,validationErrors:{}}),Ke(ze(e),"handleChange",(function(n){return e.setState({data:Ve(Ve({},e.state.data),{},Ke({},n.target.name,n.target.value))})})),Ke(ze(e),"handleSelectInput",(function(n,t){var r=t.name,o=t.value;return e.setState({data:Ve(Ve({},e.state.data),{},Ke({},r,o))})})),Ke(ze(e),"locationValChange",(function(){var n=be(null),t=n.location,r=n.coordinates;e.setState({data:Ve(Ve({},e.state.data),{},{location:Ve(Ve({},t),{},{coordinates:r})})})})),Ke(ze(e),"onSuggestSelect",(function(n){var t=be(n),r=t.location,o=t.coordinates;e.setState({data:Ve(Ve({},e.state.data),{},{location:Ve(Ve({},r),{},{coordinates:o})})})})),Ke(ze(e),"setMobileNumber",(function(n){var t=n.mobile_number,r=n.country_code,o=n.country_abbr;e.setState((function(e){return{data:Ve(Ve({},e.data),{},{mobile_number:t,country_code:r,country_abbr:o})}}))})),Ke(ze(e),"showAddContactForm",(function(){return e.setState({showAddForm:!0},(function(){e.props.emergencyContactInfoClearMessages()}))})),Ke(ze(e),"validate",(function(){var n={},t=e.state.data;return t.person_name||(n.person_name="Can't be blank"),t.email||(n.email="Can't be blank"),t.mobile_number||(n.mobile_number="Please enter mobile number"),t.phone_number.length>0&&!t.property_phone.match(/^[0-9+ ]{6,16}$/)&&(n.phone_number="Accepts International number only."),t.location&&(!t.location||""!==t.location.country&&t.location.country)||(n.location="Can't be blank"),n})),Ke(ze(e),"handleSubmit",(function(n){n.preventDefault();var t=e.state.data,r=e.validate();e.setState({errors:r}),0===Object.keys(r).length&&(t._id?e.props.updateEmergencyContactInfo(t,e.props.user.get("_id"),t._id):e.props.addEmergencyContactInfo(t,e.props.user.get("_id")))})),Ke(ze(e),"handleCancel",(function(n){n.preventDefault(),e.props.emergencyContactInfoClearMessages(),e.setState({data:Ze,showAddForm:!1,error:{}})})),Ke(ze(e),"handleEdit",(function(n,t){var r=t.name;n.preventDefault();var o=e.state.emergencyContacts.filter((function(e){return e._id===r}))[0];e.setState({data:o,showAddForm:!0},(function(){e.props.emergencyContactInfoClearMessages()}))})),Ke(ze(e),"handleRemove",(function(n,t){var r=t.name;n.preventDefault(),e.props.removeEmergencyContactInfo(e.props.user.get("_id"),r)})),e}return n=a,(t=[{key:"componentDidMount",value:function(){this.props.getEmergencyContactInfoRequest(this.props.user.get("_id"))}},{key:"componentWillReceiveProps",value:function(e){e.emergencyContacts&&e.emergencyContacts!==this.props.emergencyContacts&&this.setState({emergencyContacts:e.emergencyContacts.toJS()}),e.success!==this.props.success&&e.success&&this.setState({data:Ze,showAddForm:!1,validationErrors:{}})}},{key:"render",value:function(){var e,n=this,t=this.state,r=t.showAddForm,o=t.data,a=t.emergencyContacts,c=t.mobileNumberModified,i=t.errors,s=this.props,l=s.successResponse,u=s.errorResponse,d=s.isRequesting;return l&&"string"===typeof l&&(e=Le(Y.a,{message:l,timeout:1e3,success:!0})),u&&"string"===typeof u&&(e=Le(Y.a,{message:u,timeout:1e3,error:!0})),Le("div",{className:""},void 0,e&&e,Le("div",{className:"two column grid"},void 0,Le("div",{className:"column"},void 0,Le("span",{},void 0,a.length," out of 2 added"," ")),Le("div",{className:"column align-right"},void 0,!r&&a.length<2&&Le(U.a,{className:"primary",onClick:this.showAddContactForm},void 0,"Add a contact"))),!r&&a.map((function(e){return Le(B,{handleRemove:n.handleRemove,handleEdit:n.handleEdit,contact:e},e._id)})),r&&Le(pe,{handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,handleChange:this.handleChange,handleSelectInput:this.handleSelectInput,handleMobileChange:this.handleMobileChange,onMobileCountryChange:this.onMobileCountryChange,locationValChange:this.locationValChange,onSuggestSelect:this.onSuggestSelect,data:o,mobileNumberModified:c,loading:d,errors:i,setMobileNumber:this.setMobileNumber}),en,nn)}}])&&Je(n.prototype,t),r&&Je(n,r),a}(a.a.Component),rn=Object(De.a)({key:"adminProfileEmergencyContactInfo",reducer:ke}),on=Object(Ge.a)({key:"adminProfileEmergencyContactInfo",saga:we}),an=Object(c.connect)(Xe,(function(e){return{getEmergencyContactInfoRequest:function(n){return e(I(n))},addEmergencyContactInfo:function(n,t){return e(E(n,t))},updateEmergencyContactInfo:function(n,t,r){return e(S(n,t,r))},removeEmergencyContactInfo:function(n,t){return e(T(n,t))},emergencyContactInfoClearMessages:function(){return e(F())}}}));n.default=Object(Ue.compose)(rn,on,an)(tn)},"2be5c0db62773e30f8bd":function(e,n){}}]);