(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{"0fe1bff9525f1d2bdd5f":function(e,t,n){"use strict";n.r(t);var r,a=n("8af190b70a6bc55c6f1b"),o=n.n(a),i=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),c=n("a28fc3c963a1d4d1a2e5"),s=n("df4d709115ae1aca60ef"),l=n("e48885a117abf7098bbc"),u=n("849a9ef3ca1590098a9b"),f=n("adc20f99e57c573c589c"),d=n("d95b0cf107403b178365"),p=n("ab4cb61bcb2dc161defb"),b=n("2178012a0a7e6dd0fbe8"),m=n("764e4a9a7e18e4441e20"),h=n("6b20a4038fb2adfb033d"),y=n("2a75d1bf8961d1e9e83c"),v=n("40d87d883632f6045fac"),g=n("f474c75d9da68c034eae"),O=n("da310028ba2a28510514"),w=(n("9683455beae561750395"),n("f2619478499dd4aef310"),n("fcb99a06256635f70435"),n("0a44d9aa061b3ae2063b")),j=(n("35a24e2eab80b90da161"),n("ba6222ad0f1a8355d8c6"));n("aee923c66bac202f8218"),n("54f683fcda7806277002");function S(e,t,n,a){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var c=new Array(i),s=0;s<i;s++)c[s]=arguments[s+3];t.children=c}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var _,k=S("label",{},void 0,"Title"),C=S("label",{},void 0,"Infrastructure Content "),A=S("label",{},void 0,"Main Image"),R=function(e){var t=e.data,n=e.errors,r=e.handleSubmit,a=e.handleChange,o=e.handleEditorChange,i=e.handleActiveChecked,c=e.urlAction,s=e.file,l=e.onDrop;e.handleMetaKeywords,e.handleKeywordsAddition,e.metaOptions;return S(h.a,{},void 0,S(h.a.Field,{error:!!n.title},void 0,k,S(y.a,{type:"text",name:"title",value:t.title||"",onChange:a}),n.title&&S("span",{},void 0,n.title)),S(h.a.Field,{error:!!n.template_content},void 0,C,S(w.a,{data:t.template_content,handleEditorChange:o,urlAction:c}),n.template_content&&S("span",{},void 0,n.template_content)),S(h.a.Field,{},void 0,A,S(j.a,{file:s&&s||{},image:t.image_name&&t.image_name||{},onDrop:l})),S(v.a,{},void 0,S(g.a,{type:"checkbox",className:"custom-control-input",onChange:i,checked:t.active||!1,label:"Active"})),S(O.a,{className:"button primary",loading:e.isRequesting,disabled:e.isRequesting,onClick:r},void 0,"Submit"))},I=n("e95a63b25fb92ed15721");function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n,r){_||(_="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),c=0;c<o;c++)i[c]=arguments[c+3];t.children=i}if(t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});return{$$typeof:_,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function D(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var a=J(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=Object(c.b)({success:Object(m.f)(),requesting:Object(m.c)(),successResponse:Object(m.d)(),errorResponse:Object(m.b)(),singleContent:Object(m.e)()}),W=T("title",{},void 0,"Content Infrastructure"),z=T(I.Link,{className:"ui button primary",to:"/admin/dashboard/infrastructure-template"},void 0,"<-Back"),G=T("h1",{},void 0,"Infrastructure Template Form"),H=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,n,r,a=$(o);function o(){var e;K(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N(B(e=a.call.apply(a,[this].concat(n))),"state",{data:{active:!1},errors:{},roleModule:{},moduleList:[],file:[],metaOptions:[]}),N(B(e),"handleActiveChecked",(function(){return e.setState({data:E(E({},e.state.data),{},{active:!e.state.data.active})})})),N(B(e),"handleChange",(function(t){var n=e.state.errors;n[t.target.name]&&t.target.value&&delete n[t.target.name],e.setState({data:E(E({},e.state.data),{},N({},t.target.name,t.target.value))})})),N(B(e),"handleEditorChange",(function(t){var n=e.state.errors;n.template_content&&delete n.template_content,e.setState({data:E(E({},e.state.data),{},{template_content:t.target.getContent()})})})),N(B(e),"handleSubmit",(function(t){t.preventDefault();var n=e.validate();if(e.setState({errors:n}),0===Object.keys(n).length){var r=e.props.match.params.InfrastructureTemplate_id?e.props.match.params.InfrastructureTemplate_id:null;if(r){var a=e.state.data;e.props.updateInfrastructureTemplateRequest(a,e.state.file,r)}else{var o=e.state.data;e.props.postInfrastructureTemplateRequest(o,e.state.file)}}})),N(B(e),"validate",(function(){var t=e.state.data,n={};return t.title||(n.title="Can't be blank"),t.template_content||(n.template_content="Can't be blank"),n})),N(B(e),"onDrop",(function(t){t&&((t=t[0]).preview=URL.createObjectURL(t),e.setState({file:t},(function(){e.setState({data:E(E({},e.state.data),{},{image_title:e.state.file.name})})})))})),N(B(e),"handleMetaKeywords",(function(t,n){var r=n.value;e.setState({meta_keywords:[]}),e.setState({data:E(E({},e.state.data),{},{meta_keywords:r})})})),N(B(e),"handleKeywordsAddition",(function(t,n){var r=n.value;e.setState({metaOptions:[{text:r,value:r}].concat(D(e.state.metaOptions))})})),e}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this.props.match.path;e=e.split("/"),this.setState({urlAction:e[4]}),this.props.clearMessage()}},{key:"componentDidMount",value:function(){var e=this.props.match.params.InfrastructureTemplate_id?this.props.match.params.InfrastructureTemplate_id:null;e&&this.props.loadInfrastructureTemplateByIdRequest(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.singleContent!==this.props.singleContent&&this.setState((function(t){return{data:e.singleContent&&e.singleContent.toJS()}}),(function(){var e=[];t.state.data&&t.state.data.meta_keywords&&t.state.data.meta_keywords.length>0&&t.state.data.meta_keywords.map((function(t){e.push({text:t,value:t})})),t.setState({metaOptions:e})}))}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.roleModule,r=e.vendor,a=e.errors,o=e.moduleList,i=e.urlAction,c=this.props,l=(c.successResponse,c.errorResponse),u=c.requesting,f=null;return l&&"string"===typeof l&&(f=T(s.a,{message:l,timeout:5e3,error:!0})),T("div",{},void 0,W,f&&f,z,G,t&&T(R,{errors:a,data:t,vendor:r,handleChange:this.handleChange,handleSubmit:this.handleSubmit,isRequesting:u,moduleList:o,roleModule:n,handleEditorChange:this.handleEditorChange,handleActiveChecked:this.handleActiveChecked,urlAction:i,onDrop:this.onDrop,file:this.state.file,handleMetaKeywords:this.handleMetaKeywords,handleKeywordsAddition:this.handleKeywordsAddition,metaOptions:this.state.metaOptions}))}}])&&x(t.prototype,n),r&&x(t,r),o}(o.a.Component),Q=Object(d.a)({key:"infrastructureTemplate",reducer:u.a}),V=Object(f.a)({key:"infrastructureTemplate",saga:l.a}),X=Object(i.connect)(U,(function(e){return{postInfrastructureTemplateRequest:function(t,n){return e(Object(b.l)(t,n))},updateInfrastructureTemplateRequest:function(t,n,r){return e(Object(b.o)(t,n,r))},loadInfrastructureTemplateByIdRequest:function(t){return e(Object(b.f)(t))},clearMessage:function(){return e(Object(b.a)())}}}));t.default=Object(p.compose)(Q,V,X)(H)}}]);