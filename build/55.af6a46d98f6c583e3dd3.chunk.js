(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"815184f0905004c749c2":function(e,t,o){"use strict";o.r(t);var n,r=o("8af190b70a6bc55c6f1b"),a=o.n(r),c=o("d7dd51e1bf6bfc2c9c3d"),i=o("a28fc3c963a1d4d1a2e5"),d=o("df4d709115ae1aca60ef"),l=o("adc20f99e57c573c589c"),s=o("d95b0cf107403b178365"),u=o("ab4cb61bcb2dc161defb"),p=o("6542cd13fd5dd1bcffd4"),f=o("e95a63b25fb92ed15721"),m=o("5baf762ef1d7d0fc5a5d"),b=o("be07f2ce61cb200102c4"),v=o("87c2ed6a7a184aa7b2ec"),y=o("313d1c9165f4d83f950f"),h=o("6b20a4038fb2adfb033d"),g=o("e1074860633bf61d61c3"),w=o("f474c75d9da68c034eae"),O=o("da310028ba2a28510514"),D=o("9683455beae561750395"),j=o("23b8d02be40765ac53e3"),_=o.n(j),S=o("fcb99a06256635f70435");function k(e,t,o,r){n||(n="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,c=arguments.length-3;if(t||0===c||(t={children:void 0}),1===c)t.children=r;else if(c>1){for(var i=new Array(c),d=0;d<c;d++)i[d]=arguments[d+3];t.children=i}if(t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});return{$$typeof:n,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}var R,P=k("label",{},void 0,"Download Description"),x=k("label",{},void 0,"Upload Document Here"),C=k("span",{className:"link"},void 0,"Click here to add file or Drop File Here"),E=k("p",{},void 0,k("strong",{},void 0,"(Only pdf, doc or docx accepted)")),q=k("br",{}),A=k("br",{}),T=function(e){var t=e.data,o=e.errors,n=e.handleSubmit,r=e.handleChange,c=e.handleActiveChecked,i=e.onDropDocument,d=e.document,l=e.docTypeError;return k(h.a,{onSubmit:n},void 0,k(D.a,{type:"text",name:"title",label:"Download Title",value:t.title,error:o.title&&o.title,onChange:r}),o.title&&k("span",{style:{color:"red"}},void 0,o.title),k(h.a.Field,{},void 0,P,k(g.a,{type:"text",name:"description",value:t.description,error:o.description&&o.description,onChange:r}),o.description&&k("span",{style:{color:"red"}},void 0,o.description)),k(h.a.Field,{},void 0,x,k("div",{style:o.document?{backgroundColor:"#f5f5f5",padding:"30px",borderRadius:"5px",border:"1px dashed red"}:{backgroundColor:"#f5f5f5",padding:"30px",borderRadius:"5px",border:"1px dashed #aaa"}},void 0,k("div",{style:{cursor:"pointer"}},void 0,k(_.a,{className:"dropzone",onDrop:i,name:"document",multiple:!1,accept:".pdf, .txt, .doc, .docx",value:t.document_name},void 0,(function(e){var t=e.getRootProps,o=e.getInputProps;return k("section",{},void 0,a.a.createElement("div",t(),a.a.createElement("input",o()),C,E))})))),d&&function(e){return["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(e.type)?k("div",{className:"card card-md"},void 0,["application/pdf","text/plain"].includes(e.type)?k("a",{href:e.preview,target:"_blank"},void 0,e.name):k("div",{},void 0,e.name)):null!=t.document_name?k("div",{className:"card card-md"},void 0,k("a",{href:"".concat(S.g).concat(t&&t.document_name&&t.document_name.document_name)},void 0,t&&t.document_name&&t.document_name.document_original_name)):void 0}(d),l&&k("span",{style:{color:"red"}},void 0,l),o.document&&k("p",{style:{color:"red"}},void 0,o.document)),k(w.a,{type:"checkbox",onChange:c,checked:t.active||!1,label:"Active"}),q,A,k(O.a,{className:"button primary",loading:e.isRequesting,disabled:e.isRequesting},void 0,"Submit"))};function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t,o,n){R||(R="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=n;else if(a>1){for(var c=new Array(a),i=0;i<a;i++)c[i]=arguments[i+3];t.children=c}if(t&&r)for(var d in r)void 0===t[d]&&(t[d]=r[d]);else t||(t=r||{});return{$$typeof:R,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function I(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function J(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?I(Object(o),!0).forEach((function(t){W(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=H(e);if(t){var r=H(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return U(this,o)}}function U(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var G=Object(i.b)({success:Object(y.f)(),requesting:Object(y.c)(),successResponse:Object(y.d)(),errorResponse:Object(y.b)(),singleData:Object(y.e)(),user:Object(p.c)()}),K=F("div",{className:"mb-4"},void 0,F(f.Link,{className:"ui button primary",to:"/admin/dashboard/download"},void 0,"<-  Back")),Q=F("h1",{},void 0,"Download Form"),V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(a,e);var t,o,n,r=L(a);function a(){var e;M(this,a);for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return W(z(e=r.call.apply(r,[this].concat(o))),"state",{data:{active:!1,title:"",description:""},errors:{},document:[]}),W(z(e),"onDropDocument",(function(t){var o=e.state.errors;t&&(delete o.document,(t=t[0])?["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(t.type)&&(t.preview=URL.createObjectURL(t),t.extension=t.name.split(".")[t.name.split(".").length-1],e.setState({document:t,docTypeError:""})):e.setState({docTypeError:"Invalid File type. Please upload again.",document:[]}))})),W(z(e),"handleActiveChecked",(function(){return e.setState({data:J(J({},e.state.data),{},{active:!e.state.data.active})})})),W(z(e),"handleChange",(function(t){var o=e.state.errors;"download_title"===t.target.name?(!o.download_title&&t.target.value&&delete o.download_title,e.setState({data:J(J({},e.state.data),{},{download_title:t.target.value})})):"download_description"===t.target.name?e.setState({data:J(J({},e.state.data),{},{download_description:t.target.value})}):e.setState({data:J(J({},e.state.data),{},W({},t.target.name,t.target.value))})})),W(z(e),"handleSubmit",(function(t){t.preventDefault();var o=e.validate();if(e.setState({errors:o}),0===Object.keys(o).length){var n=e.props.match.params.Downloads_id?e.props.match.params.Downloads_id:null;if(n){var r=e.state,a=r.data,c=r.document;e.props.updateDownloadRequest(a,c,n)}else{var i=e.state,d=i.data,l=i.document;e.props.postDownloadRequest(d,l)}}})),W(z(e),"validate",(function(){var t=e.state,o=t.data,n=t.document,r={},a=e.props.match.params.Downloads_id?e.props.match.params.Downloads_id:null;return o.title||(r.title="Download title can't be blank"),o.description||(r.description="Download description can't be blank"),a?0===o.document_name.length&&0===n.length&&(r.document="Please attach the document"):0===n.length&&(r.document="Please attach your document"),r})),e}return t=a,(o=[{key:"componentWillMount",value:function(){this.props.clearMessage()}},{key:"componentDidMount",value:function(){var e=this.props.match.params.Downloads_id?this.props.match.params.Downloads_id:null;e&&this.props.loadDownloadByIdRequest(e);var t=this.props.user&&this.props.user.size>0?this.props.user.toJS().role:"";this.setState({userRole:t})}},{key:"componentWillReceiveProps",value:function(e){e.singleData!==this.props.singleData&&this.setState((function(t){return{data:e.singleData.toJS()}}))}},{key:"render",value:function(){var e=this.state,t=e.data,o=e.errors,n=e.document,r=e.docTypeError,a=e.userRole,c=this.props,i=(c.successResponse,c.errorResponse),l=c.requesting,s=null;return i&&"string"===typeof i&&(s=F(d.a,{message:i,timeout:5e3,error:!0})),F("div",{},void 0,s&&s,K,Q,F(T,{errors:o,data:t,handleChange:this.handleChange,handleSubmit:this.handleSubmit,isRequesting:l,handleActiveChecked:this.handleActiveChecked,onDropDocument:this.onDropDocument,document:n,docTypeError:r,userRole:a}))}}])&&$(t.prototype,o),n&&$(t,n),a}(a.a.Component),X=Object(s.a)({key:"download",reducer:b.a}),Y=Object(l.a)({key:"download",saga:m.a}),Z=Object(c.connect)(G,(function(e){return{postDownloadRequest:function(t,o){return e(Object(v.l)(t,o))},updateDownloadRequest:function(t,o,n){return e(Object(v.o)(t,o,n))},loadDownloadByIdRequest:function(t){return e(Object(v.f)(t))},clearMessage:function(){return e(Object(v.a)())}}}));t.default=Object(u.compose)(X,Y,Z)(V)}}]);