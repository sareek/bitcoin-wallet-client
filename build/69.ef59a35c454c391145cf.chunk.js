(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{d091c8f0a053967dd7dc:function(e,t,a){"use strict";a.r(t);var r,n=a("8af190b70a6bc55c6f1b"),i=a.n(n),o=a("d7dd51e1bf6bfc2c9c3d"),l=a("a28fc3c963a1d4d1a2e5"),c=a("df4d709115ae1aca60ef"),s=a("311a6ec2af48c2cf472e"),g=a("95293134d9aa631010f8"),d=a("adc20f99e57c573c589c"),m=a("d95b0cf107403b178365"),u=a("ab4cb61bcb2dc161defb"),p=a("0d7f0986bcd2f33d8a2a"),f=a("368779e9d94d83bc1db4"),v=a("ac8c574d5c13301a9d21"),h=a("6b20a4038fb2adfb033d"),b=a("f474c75d9da68c034eae"),y=a("da310028ba2a28510514"),_=a("b57570cc703435a24b60"),O=a("9683455beae561750395"),C=a("f2619478499dd4aef310"),j=a("23b8d02be40765ac53e3"),S=a.n(j),w=a("fcb99a06256635f70435");function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function D(e,t,a,n){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var l=new Array(o),c=0;c<o;c++)l[c]=arguments[c+3];t.children=l}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}var x,k=D("label",{},void 0,"Image Title"),P=D("label",{},void 0,"Image Alt Text"),R=D("label",{},void 0,"Delete"),N=D("h3",{},void 0,"Uploaded Images"),A=D("label",{},void 0,"Image Title"),q=D("label",{},void 0,"Image Alt Text"),T=D("label",{},void 0,"Delete"),G=D("label",{},void 0,D("strong",{},void 0,"Program Category")),E=D("br",{}),F=D("label",{},void 0,"Upload Images Here"),J=D("span",{className:"link"},void 0,"Drop Images here ",D("strong",{},void 0,"(only jpg, jpeg, or png accepted)")),U=D("br",{}),L=D("br",{}),M=function(e){var t=e.data,a=e.errors,r=e.handleSubmit,n=e.handleChange,o=e.handleActiveChecked,l=(e.handleDropDownChange,e.images),c=e.images_title,s=e.images_alt_text,g=e.onDropImage,d=e.handleImageRemove,m=e.handleImageTitleChange,u=e.handleCoverImageChecked,p=e.cover_image,f=(e.OnDropChange,e.handleImageDelete),v=e.programsCategoriesDropdown,j=e.handleProgramCategory;return D(h.a,{},void 0,D(h.a.Field,{error:!!a.category_id},void 0,G,D(_.a,{placeholder:"Select Program Category",options:v,search:!0,selection:!0,allowAdditions:!0,onChange:j,value:t.category_id?t.category_id:"",required:!0})),D(O.a,{type:"text",name:"title",label:"Album Title",value:t.title||"",onChange:n}),a.title&&D("span",{style:{color:"red"}},void 0,a.title),D(C.a,{type:"text",name:"description",label:"Album Description",value:t.description||"",onChange:n}),a.description&&D("span",{style:{color:"red"}},void 0,a.description),E,D(h.a.Field,{},void 0,F,D(S.a,{className:"dropzone",onDrop:g,multiple:!0,accept:".jpg, .jpeg, .png"},void 0,(function(e){var t=e.getRootProps,a=e.getInputProps;return D("section",{},void 0,i.a.createElement("div",I({},t(),{className:"dropzone"}),i.a.createElement("input",a()),J))})),l&&l.length>0&&D("div",{},void 0,N,D("div",{className:"row"},void 0,l.map((function(e,t){if(["image/png","image/jpg","image/jpeg"].includes(e.type)&&!(e.size>5242880))return D("div",{className:"col-lg-6 col-md-4"},t,D("div",{className:"image__card"},e.name,D("div",{style:{overflow:"hidden",padding:"10px"},className:"image__holder"},void 0,D("img",{style:{objectFit:"contain",height:"200px",backgroundColor:"#444"},className:"img-fluid",src:e.preview})),D("div",{className:"ui form"},void 0,D(h.a.Group,{widths:"equal",unstackable:!0},void 0,D(h.a.Field,{},void 0,A,D(O.a,{type:"text",id:t.toString(),placeholder:"Provide Image Title",name:"image_title",value:c[t],onChange:m}),q,D(O.a,{type:"text",id:t.toString(),placeholder:"Provide Image Alt Text",name:"image_alt_text",value:s[t]||[],onChange:m}),D(b.a,{label:"Cover Image",name:t.toString(),checked:!0===p[t],onChange:u})),D(h.a.Field,{className:"width-dddd text-center"},void 0,T,D(y.a,{className:"m-0",onClick:function(){return d(e)},negative:!0,icon:"trash"}))))))})))),t.images&&D("div",{className:"field"},void 0,t.images&&D("div",{className:"cards"},void 0,t.images&&t.images.map((function(e,t){return D("div",{className:"card card-md"},"image_original_name_".concat(t),D("div",{className:"image fixed"},void 0,D("h4",{},void 0,e.image_original_name),D("div",{className:"image_holder"},void 0,D("img",{className:"img-fluid",src:"".concat(w.g).concat(e.document_name)})),D(h.a.Field,{},void 0,k,D(O.a,{type:"text",id:t.toString(),placeholder:"Provide Image Title",name:"image_title",value:c[t],onChange:m}),P,D(O.a,{type:"text",id:t.toString(),placeholder:"Provide Image Alt Text",name:"image_alt_text",value:s[t]||[],onChange:m}),D(b.a,{label:"Cover Image",name:t.toString(),checked:!0===p[t],onChange:u})),D(h.a.Field,{className:"width-dddd text-center"},void 0,R,D(y.a,{className:"m-0",onClick:function(){return f(e,t)},negative:!0,icon:"trash"}))))}))))),a.images&&D("span",{style:{color:"red"}},void 0,a.images),D(b.a,{type:"checkbox",onChange:o,checked:t.active||!1,label:"Active"}),U,L,D(y.a,{className:"button primary",loading:e.isRequesting,disabled:e.isRequesting,onClick:r},void 0,"Submit"))},$=a("e95a63b25fb92ed15721");function z(e){return(z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,a,r){x||(x="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var o=new Array(i),l=0;l<i;l++)o[l]=arguments[l+3];t.children=o}if(t&&n)for(var c in n)void 0===t[c]&&(t[c]=n[c]);else t||(t=n||{});return{$$typeof:x,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){re(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=ae(e);if(t){var n=ae(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return ee(this,a)}}function ee(e,t){return!t||"object"!==z(t)&&"function"!==typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=Object(l.b)({success:Object(v.h)(),requesting:Object(v.e)(),successResponse:Object(v.f)(),errorResponse:Object(v.c)(),singleData:Object(v.g)(),categoryList:Object(v.a)(),programsCategories:Object(v.d)()}),ie=B(p.Helmet,{},void 0,B("title",{},void 0,"Image Gallery"),B("meta",{name:"description",content:"News"})),oe=B($.Link,{className:"ui button primary",to:"/admin/dashboard/image-gallery"},void 0,"<-Back"),le=B("h1",{},void 0,"Image Gallery Form"),ce=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t,a,r,n=Z(i);function i(){var e;V(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return re(te(e=n.call.apply(n,[this].concat(a))),"state",{data:{active:!1,title:"",description:"",images:[]},errors:{},language:"en",images:[],image_title:[],image_alt_text:[],cover_image:[],programsCategoriesDropdown:[]}),re(te(e),"onDropImage",(function(t){t.length<2?t[0].preview=URL.createObjectURL(t[0]):t.forEach((function(e){e.preview=URL.createObjectURL(e)})),t&&(e.setState({images:[].concat(K(e.state.images),K(t)).slice(0,10)}),e.setState({image_title:[].concat(K(e.state.image_title),K(t.map((function(e){return e.name})))).slice(0,10)}),e.setState({cover_image:[].concat(K(e.state.cover_image),K(t.map((function(e){return!1})))).slice(0,10)}),e.setState({image_alt_text:[].concat(K(e.state.image_alt_text),K(t.map((function(e){return e.name})))).slice(0,10)}))})),re(te(e),"handleImageRemove",(function(t){var a=K(e.state.images),r=e.state.image_title,n=e.state.image_alt_text,i=e.state.cover_image,o=a.indexOf(t);o>-1&&e.setState({images:[].concat(K(a.slice(0,o)),K(a.slice(o+1))),image_title:[].concat(K(r.slice(0,o)),K(r.slice(o+1))),cover_image:[].concat(K(i.slice(0,o)),K(i.slice(o+1))),image_alt_text:[].concat(K(n.slice(0,o)),K(n.slice(o+1)))})})),re(te(e),"handleImageTitleChange",(function(t){if("image_title"===t.target.name){var a=t.target.value,r=Object.assign([],e.state.image_title),n=Number(t.target.id);r=[].concat(K(r.slice(0,n)),[a],K(r.slice(n+1))),e.setState({image_title:Object.assign([],r)})}else if("image_alt_text"===t.target.name){var i=t.target.value,o=Object.assign([],e.state.image_alt_text),l=Number(t.target.id);o=[].concat(K(o.slice(0,l)),[i],K(o.slice(l+1))),e.setState({image_alt_text:Object.assign([],o)})}})),re(te(e),"handleCoverImageChecked",(function(t,a){var r=Object.assign([],e.state.cover_image),n=Number(a.name);if(!r[n])for(var i=0;i<r.length;i++)r[i]=!1;r=[].concat(K(r.slice(0,n)),[!r[n]],K(r.slice(n+1))),e.setState({cover_image:Object.assign([],r)})})),re(te(e),"handleImageDelete",(function(t,a){var r=e.state.data&&e.state.data.images;r=r.filter((function(e){return e.document_name!==t.document_name}));var n=e.state.data;n.images=r,e.setState({data:n});var i=e.state,o=i.image_title,l=i.cover_image,c=i.image_alt_text;o.splice(a,1),c.splice(a,1),l.splice(a,1),e.setState({image_title:o,image_alt_text:c,cover_image:l})})),re(te(e),"handleActiveChecked",(function(){return e.setState({data:W(W({},e.state.data),{},{active:!e.state.data.active})})})),re(te(e),"handleChange",(function(t){var a=e.state.errors;"title"===t.target.name?a.title&&t.target.value?delete a.title:a.description&&t.target.value&&delete a.description:e.setState({data:W(W({},e.state.data),{},re({},t.target.name,t.target.value))});var r=t.target.name,n=e.state.data;n[r]=t.target.value,e.setState({data:n})})),re(te(e),"OnDropChange",(function(t,a){e.setState({data:W(W({},e.state.data),{},re({},a.name,a.value))})})),re(te(e),"handleSubmit",(function(t){t.preventDefault();var a=e.validate();e.setState({errors:a}),0===Object.keys(a).length&&e.setState({data:W(W({},e.state.data),{},{image_title:e.state.image_title,image_alt_text:e.state.image_alt_text,cover_image:e.state.cover_image})},(function(){var t=e.props.match.params.album_id?e.props.match.params.album_id:null;if(t){var a=e.state,r=a.data,n=a.images;e.props.updateImageGalleryRequest(r,n,t)}else{var i=e.state,o=i.data,l=i.images;console.log(o,"??"),e.props.postImageGalleryRequest(o,l)}}))})),re(te(e),"validate",(function(){var t=e.state,a=t.data,r=t.images,n={};return a.title||(n.title="Album title can't be blank."),a.description||(n.description="Album Description can't be blank."),0===a.images.length&&0===r.length&&(n.images="Please add atleast one image to create a gallery."),n})),re(te(e),"handleProgramCategory",(function(t,a){var r=a.value,n=e.state.errors;n.category_id&&r&&delete n.category_id,e.setState({category_id:[]}),e.setState({data:W(W({},e.state.data),{},{category_id:r})})})),e}return t=i,(a=[{key:"componentWillMount",value:function(){this.props.clearMessage()}},{key:"componentDidMount",value:function(){var e=this.props.match.params.album_id?this.props.match.params.album_id:null;e&&this.props.loadImageGalleryByIdRequest(e),this.props.getProgramsCategoryRequest()}},{key:"componentWillReceiveProps",value:function(e){if(e.singleData!==this.props.singleData&&this.setState((function(t){return{data:e.singleData.toJS(),image_title:e.singleData.toJS().image_title,image_alt_text:e.singleData.toJS().image_alt_text,cover_image:e.singleData.toJS().cover_image.map((function(e){return JSON.parse(e)}))}})),e.programsCategories!==this.props.programsCategories&&e.programsCategories.size>0){var t=e.programsCategories&&e.programsCategories.toJS().map((function(e,t){return{key:e._id,value:e._id,text:e.category_title}}));this.setState({programsCategoriesDropdown:t})}}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,r=e.images,n=e.image_title,i=e.image_alt_text,o=e.cover_image,l=e.programsCategoriesDropdown,s=this.props,g=(s.successResponse,s.errorResponse),d=(s.requesting,null);return g&&"string"===typeof g&&(d=B(c.a,{message:g,timeout:5e3,error:!0})),B("div",{},void 0,d&&d,ie,oe,le,B(M,{errors:a,data:t,handleChange:this.handleChange,handleSubmit:this.handleSubmit,isRequesting:this.props.requesting,handleActiveChecked:this.handleActiveChecked,handleDropDownChange:this.handleDropDownChange,images:r,images_title:n,handleImageRemove:this.handleImageRemove,handleImageTitleChange:this.handleImageTitleChange,onDropImage:this.onDropImage,handleCoverImageChecked:this.handleCoverImageChecked,images_alt_text:i,cover_image:o,OnDropChange:this.OnDropChange,handleImageDelete:this.handleImageDelete,handleProgramCategory:this.handleProgramCategory,programsCategoriesDropdown:l}))}}])&&X(t.prototype,a),r&&X(t,r),i}(i.a.Component),se=Object(m.a)({key:"imageGallery",reducer:g.a}),ge=Object(d.a)({key:"imageGallery",saga:s.a}),de=Object(o.connect)(ne,(function(e){return{postImageGalleryRequest:function(t,a){return e(Object(f.q)(t,a))},updateImageGalleryRequest:function(t,a,r){return e(Object(f.t)(t,a,r))},loadImageGalleryByIdRequest:function(t){return e(Object(f.i)(t))},clearMessage:function(){return e(Object(f.a)())},getProgramsCategoryRequest:function(){return e(Object(f.f)())}}}));t.default=Object(u.compose)(se,ge,de)(ce)}}]);