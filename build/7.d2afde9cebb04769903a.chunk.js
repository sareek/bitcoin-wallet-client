(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"35a24e2eab80b90da161":function(e,t,n){"use strict";var o=n("8af190b70a6bc55c6f1b"),r=n.n(o),a=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),i=n("a28fc3c963a1d4d1a2e5"),c=n("df4d709115ae1aca60ef"),s=n("6c68d13fe9e3e77d8fc4"),u=n("3ad3c1378076e862aab0"),l="Bitsbeat/Components/DirectImageUpload/UPLOAD_IMAGE_REQUEST",p="Bitsbeat/Components/DirectImageUpload/UPLOAD_IMAGE_SUCCESS",d="Bitsbeat/Components/DirectImageUpload/UPLOAD_IMAGE_FAILURE",f="Bitsbeat/Components/DirectImageUpload/LOAD_MODULE_IMAGE_REQUEST",m="Bitsbeat/Components/DirectImageUpload/LOAD_MODULE_IMAGE_SUCCESS",g="Bitsbeat/Components/DirectImageUpload/LOAD_MODULE_IMAGE_FAILURE",b="Bitsbeat/Components/DirectImageUpload/CLEAR_MESSAGE",y=n("371a6f90cf4b090759be"),h=Object(y.a)(l,"data","image"),v=Object(y.a)(p,"response"),O=Object(y.a)(d,"error"),j=Object(y.a)(f,"module"),I=Object(y.a)(m,"response"),w=Object(y.a)(g,"error"),S=Object(y.a)(b),_=n("8636a5b0e6ac43ae8b4d"),U=regeneratorRuntime.mark(x),C=regeneratorRuntime.mark(E),L=regeneratorRuntime.mark(M),R=regeneratorRuntime.mark(A),k=regeneratorRuntime.mark(P);function x(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)(p);case 2:e.sent;case 3:case"end":return e.stop()}}),U)}function E(e){var t,n,o,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=localStorage.getItem("token"),a.next=3,Object(s.c)(x);case 3:return n=a.sent,o=e.data,r=e.image,a.next=7,Object(s.c)(_.a.multipartPost("common/text-editor",v,O,o,r,t));case 7:return a.next=9,Object(s.f)([u.LOCATION_CHANGE,d]);case 9:return a.next=11,Object(s.b)(n);case 11:case"end":return a.stop()}}),C)}function M(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.f)(m);case 2:e.sent;case 3:case"end":return e.stop()}}),L)}function A(e){var t,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=localStorage.getItem("token"),o.next=3,Object(s.c)(M);case 3:return n=o.sent,e.module,o.next=7,Object(s.c)(_.a.get("common/text-editor?page=1&perpage=1000",I,w,t));case 7:return o.next=9,Object(s.f)([u.LOCATION_CHANGE,g]);case 9:return o.next=11,Object(s.b)(n);case 11:case"end":return o.stop()}}),R)}function P(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.g)(l,E);case 2:return e.next=4,Object(s.g)(f,A);case 4:case"end":return e.stop()}}),k)}var D=n("54f683fcda7806277002"),q=Object(D.fromJS)({response:"",error:"",requesting:!1,success:!1,imageUploadResponse:"",imageList:{dataList:[],totalItems:0,currentPage:1}});var G,B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case l:case f:var n=null!=e.get("response")?e.get("response"):null;return e.merge({requesting:!0,success:!1,response:n,xresponse:null,error:null});case m:return e.merge({requesting:!1,success:!0,error:"",imageList:Object(D.fromJS)(t.response.data)});case p:return e.merge({requesting:!1,success:!0,error:null,imageUploadResponse:Object(D.fromJS)(t.response.data)});case d:case g:return e.merge({requesting:!1,success:!1,response:null,error:t.error.message});case b:return e.merge({response:null,error:null});default:return e}},J=n("adc20f99e57c573c589c"),N=n("d95b0cf107403b178365"),T=n("ab4cb61bcb2dc161defb"),z=function(e){return e.get("imageUpload")},H=n("344977176ae9f8bae630"),$=n("bf479727ef34adb276a5"),F=n("2a75d1bf8961d1e9e83c"),Q=n("da310028ba2a28510514"),W=n("23b8d02be40765ac53e3"),K=n.n(W),V=n("fcb99a06256635f70435");function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Y(e,t,n,o){G||(G="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:G,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var Z,ee=Y(H.a.Header,{},void 0,"Previously Uploaded Images"),te=Y("label",{},void 0,Y("b",{},void 0,"Please drop the image you want to use in the editor in the dropzone below and paste the link")),ne=Y($.a,{name:"images"}),oe=Y("span",{className:"link"},void 0,"Drop Image Here ",Y("strong",{},void 0,"(only png, jpeg or jpg accepted)")),re=Y("br",{}),ae=function(e){var t=e.handleUploadImage,n=e.uploadedImageInfo,o=e.handleCopyLink,a=e.imageModalStatus,i=e.handleModalClose,c=e.showUploadedImages,s=e.imageList;return Y("div",{},void 0,Y(H.a,{open:a,onClose:i,closeIcon:!0},void 0,ee,Y(H.a.Content,{image:!0,scrolling:!0},void 0,s&&s.dataList&&s.dataList.map((function(e,t){return Y("div",{style:{textAlign:"textCenter",padding:"0 10px"}},"images-".concat(t),Y("div",{style:{width:"220px"}},void 0,Y("img",{style:{objectFit:"contain",height:"220px",width:"220px",backgroundColor:"#444"},src:"".concat(V.g).concat(e.image_name&&e.image_name.document_name),alt:"uploaded_image_".concat(t),onClick:function(e){return o(e,t)}})),Y(F.a,{name:"modal-input",id:"image_link_".concat(t),fluid:!0,action:{color:"teal",labelPosition:"right",icon:"copy",content:"Copy",onClick:function(e){return o(e,t)}},value:e.path}))})))),te,Y(Q.a,{positive:!0,onClick:c,"data-tooltip":"Previously uploaded images"},void 0,ne),Y(K.a,{className:"dropzone",onDrop:t,name:"image",multiple:!1,accept:"image/png,image/jpeg,image/jpg"},void 0,(function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("div",X({},t(),{className:"dropzone"}),r.a.createElement("input",n()),oe)})),n&&Y(F.a,{name:"link-input",id:"image_link_input",action:{color:"teal",labelPosition:"right",icon:"copy",content:"Copy",onClick:function(e){return o(e,"input")}},value:n,fluid:!0}),re)};function ie(e){return(ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t,n,o){Z||(Z="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:Z,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=me(e);if(t){var r=me(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=Object(i.b)({success:Object(i.a)(z,(function(e){return e.get("success")})),requesting:Object(i.a)(z,(function(e){return e.get("requesting")})),successResponse:Object(i.a)(z,(function(e){return e.get("response")})),errorResponse:Object(i.a)(z,(function(e){return e.get("error")})),imageUploadResponse:Object(i.a)(z,(function(e){return e.get("imageUploadResponse")})),imageList:Object(i.a)(z,(function(e){return e.get("imageList")}))}),ye=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(a,e);var t,n,o,r=pe(a);function a(){var e;se(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return ge(fe(e=r.call.apply(r,[this].concat(n))),"state",{image:[],imageModalStatus:!1}),ge(fe(e),"handleUploadImage",(function(t){t[0]&&e.props.uploadImage({module:e.props.module||"common"},t[0])})),ge(fe(e),"handleCopyLink",(function(e,t){document.getElementById("image_link_".concat(t)).select(),document.execCommand("copy")})),ge(fe(e),"handleModalClose",(function(){e.setState((function(e){return{imageModalStatus:!1}}))})),ge(fe(e),"showUploadedImages",(function(){e.setState({imageModalStatus:!0},(function(){e.props.loadModuleImage(e.props.module)}))})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.clearMessage()}},{key:"componentWillReceiveProps",value:function(e){e.imageUploadResponse!==this.props.imageUploadResponse&&this.setState({uploadedImageInfo:e.imageUploadResponse.toJS().path}),e.imageList&&e.imageList.size>0&&e.imageList!==this.props.imageList&&this.setState({imageList:e.imageList.toJS()})}},{key:"render",value:function(){var e=this.state,t=e.uploadedImageInfo,n=e.imageModalStatus,o=e.imageList,r=this.props,a=r.successResponse,i=r.errorResponse,s=r.requesting,u=null;return a&&"string"===typeof a&&(u=ce(c.a,{message:a,timeout:5e3,success:!0})),i&&"string"===typeof i&&(u=ce(c.a,{message:i,timeout:5e3,error:!0})),ce("div",{},void 0,u&&u,ce(ae,{handleUploadImage:this.handleUploadImage,uploadedImageInfo:t,handleCopyLink:this.handleCopyLink,requesting:s,imageModalStatus:n,handleModalClose:this.handleModalClose,showUploadedImages:this.showUploadedImages,imageList:o}))}}])&&ue(t.prototype,n),o&&ue(t,o),a}(r.a.Component),he=Object(N.a)({key:"imageUpload",reducer:B}),ve=Object(J.a)({key:"imageUpload",saga:P}),Oe=Object(a.connect)(be,(function(e){return{clearMessage:function(){return e(S())},uploadImage:function(t,n){return e(h(t,n))},loadModuleImage:function(t){return e(j(t))}}}));t.a=Object(T.compose)(he,ve,Oe)(ye)}}]);