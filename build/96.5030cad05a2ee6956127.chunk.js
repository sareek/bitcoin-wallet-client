(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{"9a8a0738120f6fb673a8":function(e,t,r){"use strict";r.r(t);var n=r("8af190b70a6bc55c6f1b"),a=r.n(n),o=r("d7dd51e1bf6bfc2c9c3d"),i=r("a28fc3c963a1d4d1a2e5"),s=r("df4d709115ae1aca60ef"),c=r("6c68d13fe9e3e77d8fc4"),u=r("3ad3c1378076e862aab0"),l=r("8636a5b0e6ac43ae8b4d"),d="Agriculture/AdminDashboard/WebsiteInfo/LOAD_WEBSITE_INFO_REQUEST",f="Agriculture/AdminDashboard/WebsiteInfo/LOAD_WEBSITE_INFO_SUCCESS",m="Agriculture/AdminDashboard/WebsiteInfo/LOAD_WEBSITE_INFO_FAILURE",b="Agriculture/AdminDashboard/WebsiteInfo/LOAD_WEBSITE_INFO_BY_SLUG_REQUEST",g="Agriculture/AdminDashboard/WebsiteInfo/LOAD_WEBSITE_INFO_BY_SLUG_SUCCESS",p="Agriculture/AdminDashboard/WebsiteInfo/LOAD_WEBSITE_INFO_BY_SLUG_FAILURE",y="Agriculture/AdminDashboard/WebsiteInfo/UPDATE_WEBSITE_INFO_REQUEST",h="Agriculture/AdminDashboard/WebsiteInfo/UPDATE_WEBSITE_INFO_SUCCESS",v="Agriculture/AdminDashboard/WebsiteInfo/UPDATE_WEBSITE_INFO_FAILURE",_="Agriculture/AdminDashboard/WebsiteInfo/CLEAR_MESSAGE",O=r("371a6f90cf4b090759be"),w=Object(O.a)(d),S=Object(O.a)(f,"response"),j=Object(O.a)(m,"error"),k=(Object(O.a)(b,"slug"),Object(O.a)(g,"response")),A=Object(O.a)(p,"error"),I=Object(O.a)(y,"data","main_image","logo_image"),E=Object(O.a)(h,"response"),D=Object(O.a)(v,"error"),R=Object(O.a)(_),x=regeneratorRuntime.mark(T),C=regeneratorRuntime.mark(q),L=regeneratorRuntime.mark(F),W=regeneratorRuntime.mark(N),U=regeneratorRuntime.mark(M),P=regeneratorRuntime.mark(B);function T(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.f)(f);case 2:e.sent;case 3:case"end":return e.stop()}}),x)}function q(e){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,Object(c.c)(T);case 3:return r=e.sent,e.next=6,Object(c.c)(l.a.get("organisation-info",S,j,t));case 6:return e.next=8,Object(c.f)([u.LOCATION_CHANGE,m]);case 8:return e.next=10,Object(c.b)(r);case 10:case"end":return e.stop()}}),C)}function F(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.f)(h);case 2:return e.sent,e.next=5,Object(c.d)(Object(u.push)("/admin/dashboard/website-info"));case 5:case"end":return e.stop()}}),L)}function N(e){var t,r,n,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=localStorage.getItem("token"),r=e.data,n=e.main_image,a=e.logo_image,i.next=4,Object(c.c)(F);case 4:return o=i.sent,i.next=7,Object(c.c)(l.a.multipartPostWithMultipleImageField("organisation-info",E,D,r,n,a,t,"put"));case 7:return i.next=9,Object(c.f)([u.LOCATION_CHANGE,v]);case 9:return i.next=11,Object(c.b)(o);case 11:case"end":return i.stop()}}),W)}function M(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=localStorage.getItem("token"),r=e.slug,n.next=4,Object(c.c)(l.a.get("organisation-info/".concat(r),k,A,t));case 4:case"end":return n.stop()}}),U)}function B(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)(d,q);case 2:return e.next=4,Object(c.g)(y,N);case 4:return e.next=6,Object(c.g)(b,M);case 6:case"end":return e.stop()}}),P)}var K=r("54f683fcda7806277002"),G=r("62cade0222f879de1092"),$=Object(K.fromJS)({response:"",error:"",requesting:!1,success:!1,dataObj:{dataList:[],totalItems:0,currentPage:1},singleData:null,slugData:null});var J,z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d:case b:case y:var r=null!=e.get("response")?e.get("response"):null;return e.merge({requesting:!0,success:!1,response:r,xresponse:null,error:null});case f:return r=null!=e.get("response")?e.get("response"):null,e.merge({requesting:!1,success:!0,response:null,xresponse:r,error:null,dataObj:Object(K.fromJS)(t.response.data)});case h:return e.merge({requesting:!1,success:!0,response:t.response.message,error:null});case g:return e.merge({requesting:!1,success:!0,response:t.response.message,error:null,slugData:Object(K.fromJS)(t.response.data)});case m:case v:case p:return e.merge({requesting:!1,success:!1,response:null,error:t.error.message});case _:return e.merge({response:null,error:null});case G.t:return $;default:return e}},Y=r("adc20f99e57c573c589c"),H=r("25995a7ae5cc79b4f4a4"),Q=r.n(H),V=r("d95b0cf107403b178365"),Z=r("ab4cb61bcb2dc161defb"),X=r("0d7f0986bcd2f33d8a2a"),ee=function(e){return e.get("websiteInfo")},te=r("6b20a4038fb2adfb033d"),re=r("b57570cc703435a24b60"),ne=r("e1074860633bf61d61c3"),ae=r("da310028ba2a28510514"),oe=r("9683455beae561750395"),ie=(r("23b8d02be40765ac53e3"),r("ba6222ad0f1a8355d8c6"));r("fcb99a06256635f70435");function se(e,t,r,n){J||(J="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&a)for(var c in a)void 0===t[c]&&(t[c]=a[c]);else t||(t=a||{});return{$$typeof:J,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var ce,ue=se("label",{},void 0,se("strong",{},void 0,"Meta Keywords")),le=se("label",{},void 0,se("strong",{},void 0,"Meta Description")),de=se("label",{},void 0,se("b",{},void 0,"Upload Main Image")),fe=se("br",{}),me=se("label",{},void 0,se("b",{},void 0,"Upload Logo Image")),be=se("br",{}),ge=function(e){var t=e.data,r=e.errors,n=e.handleSubmit,a=e.handleChange,o=e.main_image,i=e.logo_image,s=e.onDropMain,c=e.onDropLogo,u=e.keywordsOptions,l=e.handleKeywords,d=e.handleKeywordAddition;return se(te.a,{onSubmit:n},void 0,se(oe.a,{type:"text",name:"organisation_name",label:"Organization Name",value:t.organisation_name||"",error:r.organisation_name&&r.organisation_name,onChange:a}),se(oe.a,{type:"text",name:"phone_number",label:"Phone Number",value:t.phone_number||"",error:r.phone_number&&r.phone_number,onChange:a}),se(oe.a,{type:"text",name:"email",label:"Email",value:t.email||"",error:r.email&&r.email,onChange:a}),se(oe.a,{type:"text",name:"address",label:"Address",value:t.address||"",error:r.address&&r.address,onChange:a}),se(oe.a,{type:"text",name:"coordinates",label:"Google Maps Location",value:t.coordinates||"",error:r.coordinates&&r.coordinates,onChange:a}),se(te.a.Field,{error:!!r.meta_keywords},void 0,ue,se(re.a,{placeholder:"Select Keyword",options:u,multiple:!0,search:!0,selection:!0,allowAdditions:!0,onAddItem:d,onChange:l,value:t.meta_keywords?t.meta_keywords:[],required:!0})),se(te.a.Field,{error:!!r.meta_description},void 0,le,se(ne.a,{name:"meta_description",value:t.meta_description||"",onChange:a})),se(oe.a,{type:"text",name:"facebook",label:"Facebook URL",value:t.facebook||"",error:r.facebook&&r.facebook,onChange:a}),r.facebook&&se("span",{style:{color:"red"}},void 0,r.facebook),se(oe.a,{type:"text",name:"twitter",label:"Twitter URL",value:t.twitter||"",error:r.twitter&&r.twitter,onChange:a}),r.twitter&&se("span",{style:{color:"red"}},void 0,r.twitter),se(oe.a,{type:"text",name:"instagram",label:"Instagram URL",value:t.instagram||"",error:r.instagram&&r.instagram,onChange:a}),r.instagram&&se("span",{style:{color:"red"}},void 0,r.instagram),se(oe.a,{type:"text",name:"youtube",label:"Video Background URL",value:t.youtube||"",error:r.youtube&&r.youtube,onChange:a}),r.youtube&&se("span",{style:{color:"red"}},void 0,r.youtube),se(te.a.Field,{},void 0,de,se(ie.a,{file:o&&o||{},image:t.main_image&&t.main_image.length>0&&t.main_image[0]||{},onDrop:s}),r.main_image&&se("span",{style:{color:"red"}},void 0,r.main_image)),fe,se(te.a.Field,{},void 0,me,se(ie.a,{file:i&&i||{},image:t.logo_image&&t.logo_image.length>0&&t.logo_image[0]||{},onDrop:c}),r.logo_image&&se("span",{style:{color:"red"}},void 0,r.logo_image)),be,se(ae.a,{className:"button primary",loading:e.isRequesting,disabled:e.isRequesting},void 0,"Submit"))};function pe(e){return(pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t,r,n){ce||(ce="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=n;else if(o>1){for(var i=new Array(o),s=0;s<o;s++)i[s]=arguments[s+3];t.children=i}if(t&&a)for(var c in a)void 0===t[c]&&(t[c]=a[c]);else t||(t=a||{});return{$$typeof:ce,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function he(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var a=Ee(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ae(this,r)}}function Ae(e,t){return!t||"object"!==pe(t)&&"function"!==typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Re=Object(i.b)({success:Object(i.a)(ee,(function(e){return e.get("success")})),requesting:Object(i.a)(ee,(function(e){return e.get("requesting")})),successResponse:Object(i.a)(ee,(function(e){return e.get("response")})),errorResponse:Object(i.a)(ee,(function(e){return e.get("error")})),singleData:Object(i.a)(ee,(function(e){return e.get("dataObj")}))}),xe=ye(X.Helmet,{},void 0,ye("title",{},void 0,"Organisation Info"),ye("meta",{name:"description",content:"Organisation Info"})),Ce=ye("h1",{},void 0,"Organisation Info"),Le=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(o,e);var t,r,n,a=ke(o);function o(){var e;we(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return De(Ie(e=a.call.apply(a,[this].concat(r))),"state",{data:{organisation_name:"",address:"",email:"",facebook:"",twitter:"",meta_keywords:[],meta_description:""},errors:{},main_image:[],logo_image:[],keywords:[],keywordsOptions:[]}),De(Ie(e),"onDropMain",(function(t){var r=e.state.errors;t&&(e.setState({errors:Oe(Oe({},r),{},{main_image:null})}),(t=t[0]).preview=URL.createObjectURL(t),e.setState({main_image:t}))})),De(Ie(e),"onDropLogo",(function(t){var r=e.state.errors;t&&(e.setState({errors:Oe(Oe({},r),{},{logo_image:null})}),(t=t[0]).preview=URL.createObjectURL(t),e.setState({logo_image:t}))})),De(Ie(e),"handleChange",(function(t){delete e.state.errors[t.target.name],e.setState({data:Oe(Oe({},e.state.data),{},De({},t.target.name,t.target.value))})})),De(Ie(e),"handleSubmit",(function(t){t.preventDefault();var r=e.validate();if(e.setState({errors:r}),0===Object.keys(r).length){var n=e.state,a=n.data,o=n.main_image,i=n.logo_image;o&&i?e.props.updateWebsiteInfoRequest(a,o,i):e.props.updateWebsiteInfoRequest(a,a.main_image,a.logo_image)}})),De(Ie(e),"validateEmail",(function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())})),De(Ie(e),"validate",(function(){var t=e.state,r=t.data,n=(t.main_image,t.logo_image,{});return r.organisation_name||(n.organisation_name="Organization name can't be blank"),r.address||(n.address="Address can't be blank"),r.email||(n.email="Email can't be blank"),r.email&&!e.validateEmail(r.email)&&(n.email="Invalid email address"),r.phone_number||(n.phone_number="Phone Number is required"),r.meta_description||(n.meta_description="Can't be blank"),r.meta_keywords&&0!==r.meta_keywords.length||(n.meta_keywords="Can't be blank"),n})),De(Ie(e),"ValidateEmail",(function(){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.state.data.email)||(alert("You have entered an invalid email address!"),!1)})),De(Ie(e),"handleKeywords",(function(t,r){var n=r.value,a=e.state.errors;a.meta_keywords&&n&&delete a.meta_keywords,e.setState({keywords:[]}),n.forEach((function(t){e.setState({keywords:[].concat(he(e.state.keywords),[{keyword_title:t,url_slog_keyword:Q()(t)}])})})),e.setState({data:Oe(Oe({},e.state.data),{},{meta_keywords:n})})})),De(Ie(e),"handleKeywordAddition",(function(t,r){var n=r.value;e.setState({keywordsOptions:[{text:n,value:n}].concat(he(e.state.keywordsOptions))})})),e}return t=o,(r=[{key:"componentWillMount",value:function(){this.props.clearMessage()}},{key:"componentDidMount",value:function(){this.props.loadWebsiteInfo()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.singleData!==this.props.singleData&&this.setState((function(t){return{data:e.singleData.toJS()}}),(function(){var e=[];t.state.data&&t.state.data.meta_keywords&&t.state.data.meta_keywords.length>0&&t.state.data.meta_keywords.map((function(t){e.push({key:t,value:t,text:t})})),t.setState({keywordsOptions:e})}))}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.errors,n=e.language,a=e.urlAction,o=e.main_image,i=e.logo_image,c=e.keywordsOptions,u=this.props,l=u.successResponse,d=u.errorResponse,f=(u.requesting,null);return l&&(f=ye(s.a,{message:l,timeout:5e3,success:!0})),d&&(f=ye(s.a,{message:d,timeout:5e3,error:!0})),ye("div",{},void 0,f&&f,xe,Ce,ye(ge,{errors:r,data:t,handleChange:this.handleChange,handleSubmit:this.handleSubmit,isRequesting:this.props.requesting,handleDropDownChange:this.handleDropDownChange,language:n,main_image:o,logo_image:i,onDropMain:this.onDropMain,onDropLogo:this.onDropLogo,urlAction:a,handleEditorChange:this.handleEditorChange,handleKeywords:this.handleKeywords,handleKeywordAddition:this.handleKeywordAddition,keywordsOptions:c}))}}])&&Se(t.prototype,r),n&&Se(t,n),o}(a.a.Component),We=Object(V.a)({key:"websiteInfo",reducer:z}),Ue=Object(Y.a)({key:"websiteInfo",saga:B}),Pe=Object(o.connect)(Re,(function(e){return{updateWebsiteInfoRequest:function(t,r,n){return e(I(t,r,n))},loadWebsiteInfo:function(){return e(w())},clearMessage:function(){return e(R())}}}));t.default=Object(Z.compose)(We,Ue,Pe)(Le)}}]);