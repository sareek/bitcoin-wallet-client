(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"8235f6c1aaf6bcac7e1d":function(e,t,a){"use strict";a.r(t);var r,o=a("8af190b70a6bc55c6f1b"),n=a.n(o),i=a("d7dd51e1bf6bfc2c9c3d"),s=a("a28fc3c963a1d4d1a2e5"),d=a("df4d709115ae1aca60ef"),l=a("a8fb3ebb9b86b60da384"),c=a("fdee4d83491f61eb7483"),u=a("adc20f99e57c573c589c"),p=a("d95b0cf107403b178365"),f=a("ab4cb61bcb2dc161defb"),g=a("4f0dfcf9dfa819c812e6"),v=a("da1bdf5f663ab69cef92"),m=a("e51a2dec1323b316dee8"),b=a("6542cd13fd5dd1bcffd4"),y=a("6b20a4038fb2adfb033d"),h=a("b57570cc703435a24b60"),_=a("f474c75d9da68c034eae"),w=a("827b7ceda1a04371490c"),C=a("da310028ba2a28510514"),S=a("f2619478499dd4aef310"),k=a("6d0b3088082c0f598087"),O=a.n(k),D=(a("f85e09def79cc2a20bc2"),a("0a44d9aa061b3ae2063b")),j=a("ba6222ad0f1a8355d8c6");function P(e,t,a,o){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var s=new Array(i),d=0;d<i;d++)s[d]=arguments[d+3];t.children=s}if(t&&n)for(var l in n)void 0===t[l]&&(t[l]=n[l]);else t||(t=n||{});return{$$typeof:r,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}var E,R=P("label",{},void 0,P("strong",{},void 0,"Program Category")),A=P("label",{},void 0,P("strong",{},void 0,"Belongs to Program")),F=P("label",{},void 0,"Event Title"),q=P("label",{},void 0,"Slug"),x=P("label",{},void 0,"Event Start Date"),M=P("label",{},void 0,"Event End Date"),I=P("label",{className:"mb-3"},void 0,"Location Info:"),K=P("label",{},void 0,"Venue Details"),N=P("label",{},void 0,"Event Detail*"),T=P("label",{},void 0,P("strong",{},void 0,"Meta Keywords")),J=P("label",{},void 0,P("strong",{},void 0,"Meta Description")),L=P("label",{},void 0,"Social Media Links"),$=P("label",{},void 0,"Facebook"),B=P("label",{},void 0,"Twitter"),z=P("label",{},void 0,"LinkedIn"),U=function(e){var t=e.data,a=e.errors,r=e.handleSubmit,o=e.handleChange,n=e.handleChecked,i=e.onDrop,s=e.image,d=e.handlePublishDateChange,l=e.handleEditorChange,c=e.urlAction,u=e.keywordsOptions,p=e.handleKeywords,f=e.handleKeywordAddition,g=e.programsCategoriesDropdown,v=e.handleProgramCategory,m=e.programsSpecificCategoriesDropdown,b=e.handleSpecificProgramCategory;return P(y.a,{onSubmit:r},void 0,P(y.a.Field,{error:!!a.category_id},void 0,R,P(h.a,{placeholder:"Select Program Category",options:g,search:!0,selection:!0,allowAdditions:!0,onChange:v,value:t.category_id?t.category_id:"",required:!0})),t.category_id&&P(y.a.Field,{error:!!a.specific_program_id},void 0,A,P(h.a,{placeholder:"Select Specific Program",options:m,selection:!0,onChange:b,value:t.specific_program_id?t.specific_program_id:"",required:!0})),P(y.a.Field,{error:!!a.title},void 0,F,P("input",{type:"text",name:"title",value:t.title||"",onChange:o}),a.title&&P("span",{},void 0,a.title)),P(y.a.Field,{},void 0,P(_.a,{name:"custom_url_slug",onChange:n,checked:t.custom_url_slug||!1,label:"Custom Slug"})),t.custom_url_slug&&P(y.a.Field,{error:!!a.slug},void 0,q,P("input",{type:"text",name:"slug",value:t.slug||"",onChange:o}),a.slug&&P("span",{},void 0,a.slug)),P(y.a.Field,{},void 0,P(_.a,{name:"multi_days_event",onChange:n,checked:t.multi_days_event||!1,label:"Multi Days Event"})),P(y.a.Field,{},void 0,x,P(O.a,{fluid:!0,placeholder:"Exam Start Date*",selected:new Date(t.start_date||new Date),onChange:function(e){return d("start_date",e)},error:a.start_date,required:!0,showTimeSelect:!0,timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa"})),t.multi_days_event&&P(y.a.Field,{error:!!a.end_date},void 0,M,P(O.a,{fluid:!0,placeholder:"Enter Publish Date*",selected:new Date(t.end_date||new Date),onChange:function(e){return d("end_date",e)},error:a.end_date,required:!0,showTimeSelect:!0,timeIntervals:1,dateFormat:"MMMM d, yyyy h:mm aa",minDate:t.start_date&&new Date(t.start_date)||new Date}),a.end_date&&P("span",{},void 0,a.end_date)),P(w.a,{},void 0,I,P(y.a.Field,{error:!!a.venue_details},void 0,K,P(S.a,{type:"text",name:"venue_details",value:t.venue_details||"",onChange:o}))),P(y.a.Field,{error:!!a.event_detail},void 0,N,P(D.a,{data:t.event_detail,handleEditorChange:l,urlAction:c}),a.event_detail&&P("span",{},void 0,a.event_detail)),P(y.a.Field,{},void 0,P(j.a,{file:s&&s||{},image:t.image_name&&t.image_name||{},onDrop:i})),P(y.a.Field,{error:!!a.meta_keywords},void 0,T,P(h.a,{placeholder:"Select Keyword",options:u,multiple:!0,search:!0,selection:!0,allowAdditions:!0,onAddItem:f,onChange:p,value:t.meta_keywords?t.meta_keywords:[],required:!0})),P(y.a.Field,{error:!!a.meta_description},void 0,J,P(S.a,{name:"meta_description",value:t.meta_description||"",onChange:o})),P(w.a,{},void 0,L,P(y.a.Field,{error:!!a.facebook},void 0,$,P("input",{type:"text",name:"facebook_event",value:t.social_media_links.facebook_event||"",onChange:o})),P(y.a.Field,{error:!!a.twitter},void 0,B,P("input",{type:"text",name:"twitter_event",value:t.social_media_links.twitter_event||"",onChange:o})),P(y.a.Field,{error:!!a.linkedin},void 0,z,P("input",{type:"text",name:"linkedin_event",value:t.social_media_links.linkedin_event||"",onChange:o}))),P(y.a.Field,{},void 0,P(_.a,{name:"active",onChange:n,checked:t.active||!1,label:"Active"})),P(C.a,{className:"button primary",loading:e.isRequesting,disabled:e.isRequesting},void 0,"Submit"))},V=a("e95a63b25fb92ed15721");function W(e){return(W="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t,a,r){E||(E="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,n=arguments.length-3;if(t||0===n||(t={children:void 0}),1===n)t.children=r;else if(n>1){for(var i=new Array(n),s=0;s<n;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var d in o)void 0===t[d]&&(t[d]=o[d]);else t||(t=o||{});return{$$typeof:E,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function H(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=ne(e);if(t){var o=ne(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return re(this,a)}}function re(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var se=a("25995a7ae5cc79b4f4a4"),de=Object(s.b)({success:Object(m.h)(),requesting:Object(m.e)(),successResponse:Object(m.f)(),errorResponse:Object(m.b)(),singleData:Object(m.g)(),user:Object(b.c)(),programsCategories:Object(m.c)(),specificCategories:Object(m.d)()}),le=G("div",{className:"pb-3"},void 0,G(V.Link,{className:"ui vertical animated button primary",to:"/admin/dashboard/event",role:"button"},void 0,G("div",{className:"hidden content"},void 0,"Back"),G("div",{className:"visible content"},void 0,G("i",{"aria-hidden":"true",className:"left arrow icon"})))),ce=G("h1",{},void 0,"Event Form"),ue=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(n,e);var t,a,r,o=ae(n);function n(){var e;Z(this,n);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return ie(oe(e=o.call.apply(o,[this].concat(a))),"state",{data:{active:!1,multi_days_event:!1,start_date:new Date,social_media_links:{},location:{},custom_url_slug:!1,meta_keywords:[],meta_description:"",venue_details:""},keywords:[],keywordsOptions:[],errors:{},image:[],programsCategoriesDropdown:[],programsSpecificCategoriesDropdown:[]}),ie(oe(e),"onDrop",(function(t){t&&((t=t[0]).preview=URL.createObjectURL(t),e.setState({image:t}))})),ie(oe(e),"handleChange",(function(t){var a=e.state.errors;a[t.target.name]&&delete a[t.target.name];var r=t.target.name,o=t.target.value;"facebook_event"==r||"twitter_event"==r||"linkedin_event"==r?e.setState({data:Y(Y({},e.state.data),{},{social_media_links:Y(Y({},e.state.data.social_media_links),{},ie({},r,o))})}):e.setState({data:Y(Y({},e.state.data),{},ie({},r,o))})})),ie(oe(e),"handleEditorChange",(function(t){var a=e.state.errors;a.event_detail&&delete a.event_detail,e.setState({data:Y(Y({},e.state.data),{},{event_detail:t.target.getContent()})})})),ie(oe(e),"parseDate",(function(e){return Object(g.a)(e).format()})),ie(oe(e),"handlePublishDateChange",(function(t,a){e.setState({data:Y(Y({},e.state.data),{},ie({},t,e.parseDate(a)))})})),ie(oe(e),"handleChecked",(function(t,a){e.setState((function(e){return{data:Y(Y({},e.data),{},ie({},a.name,!e.data[a.name]))}}),(function(){"custom_url_slug"!=a.name||e.state.custom_url_slug||e.setState({data:Y(Y({},e.state.data),{},{slug:""})})}))})),ie(oe(e),"handleSubmit",(function(t){t.preventDefault();var a=e.validate();if(console.log("sss",a),e.setState({errors:a}),0===Object.keys(a).length){var r=e.props.match.params.event_id?e.props.match.params.event_id:null,o=e.state,n=o.data,i=o.image;n.custom_url_slug||n.slug||(n.slug=se(n.title)),r?e.props.updateEventRequest(n,i,r):e.props.postEventRequest(n,i)}})),ie(oe(e),"validate",(function(){var t=e.state.data,a={};return t.title||(a.title="Event title can't be blank"),t.event_detail||(a.event_detail="Event Description can't be blank"),t.start_date||(a.start_date="Please Provide Start Date"),t.multi_days_event&&!t.end_date&&(a.end_date="Please Provide End Date"),t.custom_url_slug&&!t.slug&&(a.slug="Slug is required"),t.venue_details||(a.venue_details="Venue Details cannot be blank"),t.meta_description||(a.meta_description="Can't be blank"),t.meta_keywords&&0!=t.meta_keywords.length||(a.meta_keywords="Can't be blank"),t.category_id&&0!=t.category_id.length||(a.category_id="Can't be blank"),t.specific_program_id&&0!=t.specific_program_id.length||(a.specific_program_id="Can't be blank"),a})),ie(oe(e),"handleKeywords",(function(t,a){var r=a.value,o=e.state.errors;o.meta_keywords&&r&&delete o.meta_keywords,e.setState({keywords:[]}),r.forEach((function(t){e.setState({keywords:[].concat(H(e.state.keywords),[{keyword_title:t,url_slog_keyword:se(t)}])})})),e.setState({data:Y(Y({},e.state.data),{},{meta_keywords:r})})})),ie(oe(e),"handleKeywordAddition",(function(t,a){var r=a.value;e.setState({keywordsOptions:[{text:r,value:r}].concat(H(e.state.keywordsOptions))})})),ie(oe(e),"handleProgramCategory",(function(t,a){var r;a.options.map((function(e){a.value===e.value&&"string"===typeof e.text&&(r=e.text)}));var o=e.state.errors;o.category_id&&a.value&&delete o.category_id,e.setState({category_id:[]}),e.setState({data:Y(Y({},e.state.data),{},{category_id:a.value,program_value:r})},(function(){e.props.getProgramsOfSpecificCategory(r)}))})),ie(oe(e),"handleSpecificProgramCategory",(function(t,a){var r;a.options.map((function(e){a.value===e.value&&"string"===typeof e.text&&(r=e.text)}));var o=e.state.errors;o.specific_program_id&&a.value&&delete o.specific_program_id,e.setState({specific_program_id:[],specific_program_value:""}),e.setState({data:Y(Y({},e.state.data),{},{specific_program_id:a.value,specific_program_value:r})})})),e}return t=n,(a=[{key:"componentWillMount",value:function(){this.props.clearMessage();var e=this.props.match.path;e=e.split("/"),this.setState({urlAction:e[4]})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.event_id?this.props.match.params.event_id:null;e&&this.props.loadEventByIdRequest(e),this.props.getProgramsCategoryRequest();var t=this.props.user&&this.props.user.size>0?this.props.user.toJS().role:"";this.setState({userRole:t})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.programsCategories!==this.props.programsCategories&&e.programsCategories.size>0){var a=e.programsCategories&&e.programsCategories.toJS().map((function(e,t){return{key:e._id,value:e._id,text:e.category_title}}));this.setState({programsCategoriesDropdown:a})}if(e.specificCategories!==this.props.specificCategories&&e.specificCategories.size>0){var r=e.specificCategories&&e.specificCategories.toJS().map((function(e,t){return{key:e._id,text:e.title,value:e._id}}));this.setState({programsSpecificCategoriesDropdown:r})}e.singleData!==this.props.singleData&&this.setState((function(t){return{data:e.singleData.toJS()}}),(function(){t.props.getProgramsOfSpecificCategory(t.state.data.program_value);var e=[];t.state.data&&t.state.data.meta_keywords&&t.state.data.meta_keywords.map((function(t){e.push({key:t,value:t,text:t})})),t.setState({keywordsOptions:e})}))}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,r=e.image,o=(e.userRole,e.keywordsOptions),n=e.programsCategoriesDropdown,i=e.programsSpecificCategoriesDropdown,s=this.props,l=s.successResponse,c=s.errorResponse,u=(s.requesting,null);return l&&"string"===typeof l&&(u=G(d.a,{message:l,timeout:5e3,success:!0})),c&&"string"===typeof c&&(u=G(d.a,{message:c,timeout:5e3,error:!0})),G("div",{},void 0,u&&u,le,ce,G(U,{errors:a,data:t,handleChange:this.handleChange,handleSubmit:this.handleSubmit,isRequesting:this.props.requesting,image:r,onDrop:this.onDrop,parseDate:this.parseDate,handlePublishDateChange:this.handlePublishDateChange,handleChecked:this.handleChecked,urlAction:this.state.urlAction,handleEditorChange:this.handleEditorChange,handleKeywords:this.handleKeywords,handleKeywordAddition:this.handleKeywordAddition,keywordsOptions:o,programsCategoriesDropdown:n,handleProgramCategory:this.handleProgramCategory,programsSpecificCategoriesDropdown:i,handleSpecificProgramCategory:this.handleSpecificProgramCategory}))}}])&&ee(t.prototype,a),r&&ee(t,r),n}(n.a.Component),pe=Object(p.a)({key:"event",reducer:c.a}),fe=Object(u.a)({key:"event",saga:l.a}),ge=Object(i.connect)(de,(function(e){return{postEventRequest:function(t,a){return e(Object(v.r)(t,a))},updateEventRequest:function(t,a,r){return e(Object(v.u)(t,a,r))},getProgramsOfSpecificCategory:function(t){return e(Object(v.h)(t))},loadEventByIdRequest:function(t){return e(Object(v.l)(t))},getProgramsCategoryRequest:function(){return e(Object(v.f)())},clearMessage:function(){return e(Object(v.a)())}}}));t.default=Object(f.compose)(pe,fe,ge)(ue)}}]);